(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.simpleDatatables = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
(function (global){(function (){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function i(t,e,s){var n;return"#text"===t.nodeName?n=s.document.createTextNode(t.data):"#comment"===t.nodeName?n=s.document.createComment(t.data):(e?n=s.document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):"svg"===t.nodeName.toLowerCase()?(n=s.document.createElementNS("http://www.w3.org/2000/svg","svg"),e=!0):n=s.document.createElement(t.nodeName),t.attributes&&Object.entries(t.attributes).forEach((function(t){var e=t[0],s=t[1];return n.setAttribute(e,s)})),t.childNodes&&t.childNodes.forEach((function(t){return n.appendChild(i(t,e,s))})),s.valueDiffing&&(t.value&&(n.value=t.value),t.checked&&(n.checked=t.checked),t.selected&&(n.selected=t.selected))),n}function n(t,e){for(e=e.slice();e.length>0;){if(!t.childNodes)return!1;var s=e.splice(0,1)[0];t=t.childNodes[s]}return t}function o(t,e,s){var o,a,r,l,d=n(t,e[s._const.route]),c={diff:e,node:d};if(s.preDiffApply(c))return!0;switch(e[s._const.action]){case s._const.addAttribute:if(!d||!d.setAttribute)return!1;d.setAttribute(e[s._const.name],e[s._const.value]);break;case s._const.modifyAttribute:if(!d||!d.setAttribute)return!1;d.setAttribute(e[s._const.name],e[s._const.newValue]),"INPUT"===d.nodeName&&"value"===e[s._const.name]&&(d.value=e[s._const.newValue]);break;case s._const.removeAttribute:if(!d||!d.removeAttribute)return!1;d.removeAttribute(e[s._const.name]);break;case s._const.modifyTextElement:if(!d||3!==d.nodeType)return!1;s.textDiff(d,d.data,e[s._const.oldValue],e[s._const.newValue]);break;case s._const.modifyValue:if(!d||void 0===d.value)return!1;d.value=e[s._const.newValue];break;case s._const.modifyComment:if(!d||void 0===d.data)return!1;s.textDiff(d,d.data,e[s._const.oldValue],e[s._const.newValue]);break;case s._const.modifyChecked:if(!d||void 0===d.checked)return!1;d.checked=e[s._const.newValue];break;case s._const.modifySelected:if(!d||void 0===d.selected)return!1;d.selected=e[s._const.newValue];break;case s._const.replaceElement:d.parentNode.replaceChild(i(e[s._const.newValue],"svg"===e[s._const.newValue].nodeName.toLowerCase(),s),d);break;case s._const.relocateGroup:Array.apply(void 0,new Array(e.groupLength)).map((function(){return d.removeChild(d.childNodes[e[s._const.from]])})).forEach((function(t,i){0===i&&(a=d.childNodes[e[s._const.to]]),d.insertBefore(t,a||null)}));break;case s._const.removeElement:d.parentNode.removeChild(d);break;case s._const.addElement:l=(r=e[s._const.route].slice()).splice(r.length-1,1)[0],(d=n(t,r)).insertBefore(i(e[s._const.element],"http://www.w3.org/2000/svg"===d.namespaceURI,s),d.childNodes[l]||null);break;case s._const.removeTextElement:if(!d||3!==d.nodeType)return!1;d.parentNode.removeChild(d);break;case s._const.addTextElement:if(l=(r=e[s._const.route].slice()).splice(r.length-1,1)[0],o=s.document.createTextNode(e[s._const.value]),!(d=n(t,r))||!d.childNodes)return!1;d.insertBefore(o,d.childNodes[l]||null);break;default:console.log("unknown action")}return c.newNode=o,s.postDiffApply(c),!0}function a(t,e,s){var i=t[e];t[e]=t[s],t[s]=i}var r=function(t){var e=this;void 0===t&&(t={}),Object.entries(t).forEach((function(t){var s=t[0],i=t[1];return e[s]=i}))};function l(t){var e=[];return e.push(t.nodeName),"#text"!==t.nodeName&&"#comment"!==t.nodeName&&t.attributes&&(t.attributes.class&&e.push(t.nodeName+"."+t.attributes.class.replace(/ /g,".")),t.attributes.id&&e.push(t.nodeName+"#"+t.attributes.id)),e}function d(t){var e={},s={};return t.forEach((function(t){l(t).forEach((function(t){var i=t in e;i||t in s?i&&(delete e[t],s[t]=!0):e[t]=!0}))})),e}function c(t,e){var s=d(t),i=d(e),n={};return Object.keys(s).forEach((function(t){i[t]&&(n[t]=!0)})),n}function h(t){return delete t.outerDone,delete t.innerDone,delete t.valueDone,!t.childNodes||t.childNodes.every(h)}function u(t,e){if(!["nodeName","value","checked","selected","data"].every((function(s){return t[s]===e[s]})))return!1;if(Boolean(t.attributes)!==Boolean(e.attributes))return!1;if(Boolean(t.childNodes)!==Boolean(e.childNodes))return!1;if(t.attributes){var s=Object.keys(t.attributes),i=Object.keys(e.attributes);if(s.length!==i.length)return!1;if(!s.every((function(s){return t.attributes[s]===e.attributes[s]})))return!1}if(t.childNodes){if(t.childNodes.length!==e.childNodes.length)return!1;if(!t.childNodes.every((function(t,s){return u(t,e.childNodes[s])})))return!1}return!0}function p(t,e,s,i,n){if(!t||!e)return!1;if(t.nodeName!==e.nodeName)return!1;if("#text"===t.nodeName)return!!n||t.data===e.data;if(t.nodeName in s)return!0;if(t.attributes&&e.attributes){if(t.attributes.id){if(t.attributes.id!==e.attributes.id)return!1;if(t.nodeName+"#"+t.attributes.id in s)return!0}if(t.attributes.class&&t.attributes.class===e.attributes.class&&t.nodeName+"."+t.attributes.class.replace(/ /g,".")in s)return!0}if(i)return!0;var o=t.childNodes?t.childNodes.slice().reverse():[],a=e.childNodes?e.childNodes.slice().reverse():[];if(o.length!==a.length)return!1;if(n)return o.every((function(t,e){return t.nodeName===a[e].nodeName}));var r=c(o,a);return o.every((function(t,e){return p(t,a[e],r,!0,!0)}))}function f(t){return JSON.parse(JSON.stringify(t))}function m(t,e,s,i){var n=0,o=[],a=t.length,r=e.length,d=Array.apply(void 0,new Array(a+1)).map((function(){return[]})),h=c(t,e),u=a===r;u&&t.some((function(t,s){var i=l(t),n=l(e[s]);return i.length!==n.length?(u=!1,!0):(i.some((function(t,e){if(t!==n[e])return u=!1,!0})),!u||void 0)}));for(var f=0;f<a;f++)for(var m=t[f],g=0;g<r;g++){var v=e[g];s[f]||i[g]||!p(m,v,h,u)?d[f+1][g+1]=0:(d[f+1][g+1]=d[f][g]?d[f][g]+1:1,d[f+1][g+1]>=n&&(n=d[f+1][g+1],o=[f+1,g+1]))}return 0!==n&&{oldValue:o[0]-n,newValue:o[1]-n,length:n}}function g(t,e){return Array.apply(void 0,new Array(t)).map((function(){return e}))}r.prototype.toString=function(){return JSON.stringify(this)},r.prototype.setValue=function(t,e){return this[t]=e,this};var v=function(){this.list=[]};function b(t,e){var s,i,n=t;for(e=e.slice();e.length>0;){if(!n.childNodes)return!1;i=e.splice(0,1)[0],s=n,n=n.childNodes[i]}return{node:n,parentNode:s,nodeIndex:i}}function w(t,e,s){return e.forEach((function(e){!function(t,e,s){var i,n,o,a=b(t,e[s._const.route]),r=a.node,l=a.parentNode,d=a.nodeIndex,c=[],h={diff:e,node:r};if(s.preVirtualDiffApply(h))return!0;switch(e[s._const.action]){case s._const.addAttribute:r.attributes||(r.attributes={}),r.attributes[e[s._const.name]]=e[s._const.value],"checked"===e[s._const.name]?r.checked=!0:"selected"===e[s._const.name]?r.selected=!0:"INPUT"===r.nodeName&&"value"===e[s._const.name]&&(r.value=e[s._const.value]);break;case s._const.modifyAttribute:r.attributes[e[s._const.name]]=e[s._const.newValue];break;case s._const.removeAttribute:delete r.attributes[e[s._const.name]],0===Object.keys(r.attributes).length&&delete r.attributes,"checked"===e[s._const.name]?r.checked=!1:"selected"===e[s._const.name]?delete r.selected:"INPUT"===r.nodeName&&"value"===e[s._const.name]&&delete r.value;break;case s._const.modifyTextElement:r.data=e[s._const.newValue];break;case s._const.modifyValue:r.value=e[s._const.newValue];break;case s._const.modifyComment:r.data=e[s._const.newValue];break;case s._const.modifyChecked:r.checked=e[s._const.newValue];break;case s._const.modifySelected:r.selected=e[s._const.newValue];break;case s._const.replaceElement:(i=f(e[s._const.newValue])).outerDone=!0,i.innerDone=!0,i.valueDone=!0,l.childNodes[d]=i;break;case s._const.relocateGroup:r.childNodes.splice(e[s._const.from],e.groupLength).reverse().forEach((function(t){return r.childNodes.splice(e[s._const.to],0,t)})),r.subsets&&r.subsets.forEach((function(t){if(e[s._const.from]<e[s._const.to]&&t.oldValue<=e[s._const.to]&&t.oldValue>e[s._const.from]){t.oldValue-=e.groupLength;var i=t.oldValue+t.length-e[s._const.to];i>0&&(c.push({oldValue:e[s._const.to]+e.groupLength,newValue:t.newValue+t.length-i,length:i}),t.length-=i)}else if(e[s._const.from]>e[s._const.to]&&t.oldValue>e[s._const.to]&&t.oldValue<e[s._const.from]){t.oldValue+=e.groupLength;var n=t.oldValue+t.length-e[s._const.to];n>0&&(c.push({oldValue:e[s._const.to]+e.groupLength,newValue:t.newValue+t.length-n,length:n}),t.length-=n)}else t.oldValue===e[s._const.from]&&(t.oldValue=e[s._const.to])}));break;case s._const.removeElement:l.childNodes.splice(d,1),l.subsets&&l.subsets.forEach((function(t){t.oldValue>d?t.oldValue-=1:t.oldValue===d?t.delete=!0:t.oldValue<d&&t.oldValue+t.length>d&&(t.oldValue+t.length-1===d?t.length--:(c.push({newValue:t.newValue+d-t.oldValue,oldValue:d,length:t.length-d+t.oldValue-1}),t.length=d-t.oldValue))})),r=l;break;case s._const.addElement:n=e[s._const.route].slice(),o=n.splice(n.length-1,1)[0],r=b(t,n).node,(i=f(e[s._const.element])).outerDone=!0,i.innerDone=!0,i.valueDone=!0,r.childNodes||(r.childNodes=[]),o>=r.childNodes.length?r.childNodes.push(i):r.childNodes.splice(o,0,i),r.subsets&&r.subsets.forEach((function(t){if(t.oldValue>=o)t.oldValue+=1;else if(t.oldValue<o&&t.oldValue+t.length>o){var e=t.oldValue+t.length-o;c.push({newValue:t.newValue+t.length-e,oldValue:o+1,length:e}),t.length-=e}}));break;case s._const.removeTextElement:l.childNodes.splice(d,1),"TEXTAREA"===l.nodeName&&delete l.value,l.subsets&&l.subsets.forEach((function(t){t.oldValue>d?t.oldValue-=1:t.oldValue===d?t.delete=!0:t.oldValue<d&&t.oldValue+t.length>d&&(t.oldValue+t.length-1===d?t.length--:(c.push({newValue:t.newValue+d-t.oldValue,oldValue:d,length:t.length-d+t.oldValue-1}),t.length=d-t.oldValue))})),r=l;break;case s._const.addTextElement:n=e[s._const.route].slice(),o=n.splice(n.length-1,1)[0],(i={}).nodeName="#text",i.data=e[s._const.value],(r=b(t,n).node).childNodes||(r.childNodes=[]),o>=r.childNodes.length?r.childNodes.push(i):r.childNodes.splice(o,0,i),"TEXTAREA"===r.nodeName&&(r.value=e[s._const.newValue]),r.subsets&&r.subsets.forEach((function(t){if(t.oldValue>=o&&(t.oldValue+=1),t.oldValue<o&&t.oldValue+t.length>o){var e=t.oldValue+t.length-o;c.push({newValue:t.newValue+t.length-e,oldValue:o+1,length:e}),t.length-=e}}));break;default:console.log("unknown action")}r.subsets&&(r.subsets=r.subsets.filter((function(t){return!t.delete&&t.oldValue!==t.newValue})),c.length&&(r.subsets=r.subsets.concat(c))),h.newNode=i,s.postVirtualDiffApply(h)}(t,e,s)})),!0}function y(t,e){void 0===e&&(e={});var s={};return s.nodeName=t.nodeName,"#text"===s.nodeName||"#comment"===s.nodeName?s.data=t.data:(t.attributes&&t.attributes.length>0&&(s.attributes={},Array.prototype.slice.call(t.attributes).forEach((function(t){return s.attributes[t.name]=t.value}))),"TEXTAREA"===s.nodeName?s.value=t.value:t.childNodes&&t.childNodes.length>0&&(s.childNodes=[],Array.prototype.slice.call(t.childNodes).forEach((function(t){return s.childNodes.push(y(t,e))}))),e.valueDiffing&&(void 0!==t.checked&&t.type&&["radio","checkbox"].includes(t.type.toLowerCase())?s.checked=t.checked:void 0!==t.value&&(s.value=t.value),void 0!==t.selected&&(s.selected=t.selected))),s}v.prototype.add=function(t){var e;(e=this.list).push.apply(e,t)},v.prototype.forEach=function(t){this.list.forEach((function(e){return t(e)}))};var N=/<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>/g,_=Object.create?Object.create(null):{},x=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function V(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}var D={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function E(t){var e={nodeName:"",attributes:{}},s=t.match(/<\/?([^\s]+?)[/\s>]/);if(s&&(e.nodeName=s[1].toUpperCase(),(D[s[1]]||"/"===t.charAt(t.length-2))&&(e.voidElement=!0),e.nodeName.startsWith("!--"))){var i=t.indexOf("--\x3e");return{type:"comment",data:-1!==i?t.slice(4,i):""}}for(var n=new RegExp(x),o=null,a=!1;!a;)if(null===(o=n.exec(t)))a=!0;else if(o[0].trim())if(o[1]){var r=o[1].trim(),l=[r,""];r.indexOf("=")>-1&&(l=r.split("=")),e.attributes[l[0]]=l[1],n.lastIndex--}else o[2]&&(e.attributes[o[2]]=o[3].trim().substring(1,o[3].length-1));return e}function M(t){return delete t.voidElement,t.childNodes&&t.childNodes.forEach((function(t){return M(t)})),t}function S(t){return M(function(t,e){void 0===e&&(e={components:_});var s,i=[],n=-1,o=[],a=!1;if(0!==t.indexOf("<")){var r=t.indexOf("<");i.push({nodeName:"#text",data:-1===r?t:t.substring(0,r)})}return t.replace(N,(function(r,l){if(a){if(r!=="</"+s.nodeName+">")return;a=!1}var d,c="/"!==r.charAt(1),h=r.startsWith("\x3c!--"),u=l+r.length,p=t.charAt(u);if(h){var f=E(r);return n<0?(i.push(f),i):((d=o[n])&&(d.childNodes||(d.childNodes=[]),d.childNodes.push(f)),i)}if(c&&(s=E(r),n++,"tag"===s.type&&e.components[s.nodeName]&&(s.type="component",a=!0),s.voidElement||a||!p||"<"===p||(s.childNodes||(s.childNodes=[]),s.childNodes.push({nodeName:"#text",data:V(t.slice(u,t.indexOf("<",u)))})),0===n&&i.push(s),(d=o[n-1])&&(d.childNodes||(d.childNodes=[]),d.childNodes.push(s)),o[n]=s),(!c||s.voidElement)&&(n>-1&&(s.voidElement||s.nodeName===r.slice(2,-1).toUpperCase())&&(n--,s=-1===n?i:o[n]),!a&&"<"!==p&&p)){d=-1===n?i:o[n].childNodes||[];var m=t.indexOf("<",u),g=V(t.slice(u,-1===m?void 0:m));d.push({nodeName:"#text",data:g})}})),i[0]}(t))}var C=function(t,e,s){this.options=s,this.t1="undefined"!=typeof HTMLElement&&t instanceof HTMLElement?y(t,this.options):"string"==typeof t?S(t,this.options):JSON.parse(JSON.stringify(t)),this.t2="undefined"!=typeof HTMLElement&&e instanceof HTMLElement?y(e,this.options):"string"==typeof e?S(e,this.options):JSON.parse(JSON.stringify(e)),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig=y(t,this.options),this.t2Orig=y(e,this.options)),this.tracker=new v};C.prototype.init=function(){return this.findDiffs(this.t1,this.t2)},C.prototype.findDiffs=function(t,e){var s;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw new Error("surpassed diffcap:"+JSON.stringify(this.t1Orig)+" -> "+JSON.stringify(this.t2Orig));0===(s=this.findNextDiff(t,e,[])).length&&(u(t,e)||(this.foundAll?console.error("Could not find remaining diffs!"):(this.foundAll=!0,h(t),s=this.findNextDiff(t,e,[])))),s.length>0&&(this.foundAll=!1,this.tracker.add(s),w(t,s,this.options))}while(s.length>0);return this.tracker.list},C.prototype.findNextDiff=function(t,e,s){var i,n;if(this.options.maxDepth&&s.length>this.options.maxDepth)return[];if(!t.outerDone){if(i=this.findOuterDiff(t,e,s),this.options.filterOuterDiff&&(n=this.options.filterOuterDiff(t,e,i))&&(i=n),i.length>0)return t.outerDone=!0,i;t.outerDone=!0}if(!t.innerDone){if((i=this.findInnerDiff(t,e,s)).length>0)return i;t.innerDone=!0}if(this.options.valueDiffing&&!t.valueDone){if((i=this.findValueDiff(t,e,s)).length>0)return t.valueDone=!0,i;t.valueDone=!0}return[]},C.prototype.findOuterDiff=function(t,e,s){var i,n,o,a,l,d,c=[];if(t.nodeName!==e.nodeName){if(!s.length)throw new Error("Top level nodes have to be of the same kind.");return[(new r).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,f(t)).setValue(this.options._const.newValue,f(e)).setValue(this.options._const.route,s)]}if(s.length&&this.options.maxNodeDiffCount<Math.abs((t.childNodes||[]).length-(e.childNodes||[]).length))return[(new r).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,f(t)).setValue(this.options._const.newValue,f(e)).setValue(this.options._const.route,s)];if(t.data!==e.data)return"#text"===t.nodeName?[(new r).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,s).setValue(this.options._const.oldValue,t.data).setValue(this.options._const.newValue,e.data)]:[(new r).setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,s).setValue(this.options._const.oldValue,t.data).setValue(this.options._const.newValue,e.data)];for(n=t.attributes?Object.keys(t.attributes).sort():[],o=e.attributes?Object.keys(e.attributes).sort():[],a=n.length,d=0;d<a;d++)i=n[d],-1===(l=o.indexOf(i))?c.push((new r).setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,i).setValue(this.options._const.value,t.attributes[i])):(o.splice(l,1),t.attributes[i]!==e.attributes[i]&&c.push((new r).setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,i).setValue(this.options._const.oldValue,t.attributes[i]).setValue(this.options._const.newValue,e.attributes[i])));for(a=o.length,d=0;d<a;d++)i=o[d],c.push((new r).setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,i).setValue(this.options._const.value,e.attributes[i]));return c},C.prototype.findInnerDiff=function(t,e,s){var i=t.childNodes?t.childNodes.slice():[],n=e.childNodes?e.childNodes.slice():[],o=Math.max(i.length,n.length),a=Math.abs(i.length-n.length),l=[],d=0;if(!this.options.maxChildCount||o<this.options.maxChildCount){var c=t.subsets&&t.subsetsAge--,h=c?t.subsets:t.childNodes&&e.childNodes?function(t,e){for(var s=t.childNodes?t.childNodes:[],i=e.childNodes?e.childNodes:[],n=g(s.length,!1),o=g(i.length,!1),a=[],r=!0,l=function(){return arguments[1]};r;)(r=m(s,i,n,o))&&(a.push(r),Array.apply(void 0,new Array(r.length)).map(l).forEach((function(t){return e=t,n[r.oldValue+e]=!0,void(o[r.newValue+e]=!0);var e})));return t.subsets=a,t.subsetsAge=100,a}(t,e):[];if(h.length>0&&(l=this.attemptGroupRelocation(t,e,h,s,c)).length>0)return l}for(var p=0;p<o;p+=1){var v=i[p],b=n[p];a&&(v&&!b?"#text"===v.nodeName?(l.push((new r).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.value,v.data)),d-=1):(l.push((new r).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.element,f(v))),d-=1):b&&!v&&("#text"===b.nodeName?l.push((new r).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.value,b.data)):l.push((new r).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.element,f(b))))),v&&b&&(!this.options.maxChildCount||o<this.options.maxChildCount?l=l.concat(this.findNextDiff(v,b,s.concat(d))):u(v,b)||(i.length>n.length?("#text"===v.nodeName?l.push((new r).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.value,v.data)):l.push((new r).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,f(v)).setValue(this.options._const.route,s.concat(d))),i.splice(p,1),p-=1,d-=1,a-=1):i.length<n.length?(l=l.concat([(new r).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,f(b)).setValue(this.options._const.route,s.concat(d))]),i.splice(p,0,{}),a-=1):l=l.concat([(new r).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,f(v)).setValue(this.options._const.newValue,f(b)).setValue(this.options._const.route,s.concat(d))]))),d+=1}return t.innerDone=!0,l},C.prototype.attemptGroupRelocation=function(t,e,s,i,n){for(var o,a,l,d,c,h,u=function(t,e,s){var i=t.childNodes?g(t.childNodes.length,!0):[],n=e.childNodes?g(e.childNodes.length,!0):[],o=0;return s.forEach((function(t){for(var e=t.oldValue+t.length,s=t.newValue+t.length,a=t.oldValue;a<e;a+=1)i[a]=o;for(var r=t.newValue;r<s;r+=1)n[r]=o;o+=1})),{gaps1:i,gaps2:n}}(t,e,s),m=u.gaps1,v=u.gaps2,b=Math.min(m.length,v.length),w=[],y=0,N=0;y<b;N+=1,y+=1)if(!n||!0!==m[y]&&!0!==v[y])if(!0===m[y])if("#text"===(d=t.childNodes[N]).nodeName)if("#text"===e.childNodes[y].nodeName){if(d.data!==e.childNodes[y].data){for(h=N;t.childNodes.length>h+1&&"#text"===t.childNodes[h+1].nodeName;)if(h+=1,e.childNodes[y].data===t.childNodes[h].data){c=!0;break}if(!c)return w.push((new r).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,i.concat(y)).setValue(this.options._const.oldValue,d.data).setValue(this.options._const.newValue,e.childNodes[y].data)),w}}else w.push((new r).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,i.concat(y)).setValue(this.options._const.value,d.data)),m.splice(y,1),b=Math.min(m.length,v.length),y-=1;else w.push((new r).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,i.concat(y)).setValue(this.options._const.element,f(d))),m.splice(y,1),b=Math.min(m.length,v.length),y-=1;else if(!0===v[y])"#text"===(d=e.childNodes[y]).nodeName?(w.push((new r).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,i.concat(y)).setValue(this.options._const.value,d.data)),m.splice(y,0,!0),b=Math.min(m.length,v.length),N-=1):(w.push((new r).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,i.concat(y)).setValue(this.options._const.element,f(d))),m.splice(y,0,!0),b=Math.min(m.length,v.length),N-=1);else if(m[y]!==v[y]){if(w.length>0)return w;if(l=s[m[y]],(a=Math.min(l.newValue,t.childNodes.length-l.length))!==l.oldValue){o=!1;for(var _=0;_<l.length;_+=1)p(t.childNodes[a+_],t.childNodes[l.oldValue+_],[],!1,!0)||(o=!0);if(o)return[(new r).setValue(this.options._const.action,this.options._const.relocateGroup).setValue("groupLength",l.length).setValue(this.options._const.from,l.oldValue).setValue(this.options._const.to,a).setValue(this.options._const.route,i)]}}return w},C.prototype.findValueDiff=function(t,e,s){var i=[];return t.selected!==e.selected&&i.push((new r).setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,t.selected).setValue(this.options._const.newValue,e.selected).setValue(this.options._const.route,s)),(t.value||e.value)&&t.value!==e.value&&"OPTION"!==t.nodeName&&i.push((new r).setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,t.value||"").setValue(this.options._const.newValue,e.value||"").setValue(this.options._const.route,s)),t.checked!==e.checked&&i.push((new r).setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,t.checked).setValue(this.options._const.newValue,e.checked).setValue(this.options._const.route,s)),i};var k={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff:function(t,e,s,i){t.data=i},preVirtualDiffApply:function(){},postVirtualDiffApply:function(){},preDiffApply:function(){},postDiffApply:function(){},filterOuterDiff:null,compress:!1,_const:!1,document:!("undefined"==typeof window||!window.document)&&window.document},$=function(t){var e=this;if(void 0===t&&(t={}),this.options=t,Object.entries(k).forEach((function(t){var s=t[0],i=t[1];Object.prototype.hasOwnProperty.call(e.options,s)||(e.options[s]=i)})),!this.options._const){var s=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"];this.options._const={},this.options.compress?s.forEach((function(t,s){return e.options._const[t]=s})):s.forEach((function(t){return e.options._const[t]=t}))}this.DiffFinder=C};$.prototype.apply=function(t,e){return function(t,e,s){return e.every((function(e){return o(t,e,s)}))}(t,e,this.options)},$.prototype.undo=function(t,e){return function(t,e,s){e.length||(e=[e]),(e=e.slice()).reverse(),e.forEach((function(e){!function(t,e,s){switch(e[s._const.action]){case s._const.addAttribute:e[s._const.action]=s._const.removeAttribute,o(t,e,s);break;case s._const.modifyAttribute:a(e,s._const.oldValue,s._const.newValue),o(t,e,s);break;case s._const.removeAttribute:e[s._const.action]=s._const.addAttribute,o(t,e,s);break;case s._const.modifyTextElement:case s._const.modifyValue:case s._const.modifyComment:case s._const.modifyChecked:case s._const.modifySelected:case s._const.replaceElement:a(e,s._const.oldValue,s._const.newValue),o(t,e,s);break;case s._const.relocateGroup:a(e,s._const.from,s._const.to),o(t,e,s);break;case s._const.removeElement:e[s._const.action]=s._const.addElement,o(t,e,s);break;case s._const.addElement:e[s._const.action]=s._const.removeElement,o(t,e,s);break;case s._const.removeTextElement:e[s._const.action]=s._const.addTextElement,o(t,e,s);break;case s._const.addTextElement:e[s._const.action]=s._const.removeTextElement,o(t,e,s);break;default:console.log("unknown action")}}(t,e,s)}))}(t,e,this.options)},$.prototype.diff=function(t,e){return new this.DiffFinder(t,e,this.options).init()};var O=function(t){var e=this;void 0===t&&(t={}),this.pad="│   ",this.padding="",this.tick=1,this.messages=[];var s=function(t,s){var i=t[s];t[s]=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];e.fin(s,Array.prototype.slice.call(n));var a=i.apply(t,n);return e.fout(s,a),a}};for(var i in t)"function"==typeof t[i]&&s(t,i);this.log("┌ TRACELOG START")};O.prototype.fin=function(t,e){this.padding+=this.pad,this.log("├─> entering "+t,e)},O.prototype.fout=function(t,e){this.log("│<──┘ generated return value",e),this.padding=this.padding.substring(0,this.padding.length-this.pad.length)},O.prototype.format=function(t,e){return function(t){for(t=""+t;t.length<4;)t="0"+t;return t}(e)+"> "+this.padding+t},O.prototype.log=function(){var t=Array.prototype.slice.call(arguments),e=function(t){return t?"string"==typeof t?t:t instanceof HTMLElement?t.outerHTML||"<empty>":t instanceof Array?"["+t.map(e).join(",")+"]":t.toString()||t.valueOf()||"<unknown>":"<falsey>"};t=t.map(e).join(", "),this.messages.push(this.format(t,this.tick++))},O.prototype.toString=function(){for(var t="└───";t.length<=this.padding.length+this.pad.length;)t+="×   ";var e=this.padding;return this.padding="",t=this.format(t,this.tick),this.padding=e,this.messages.join("\n")+"\n"+t},s=$,e=y,t=S;const A=(t,e,s,{hiddenHeader:i,sortable:n,scrollY:o},{noColumnWidths:a,unhideHeader:r})=>({nodeName:"TR",childNodes:t.map(((t,l)=>{const d=e.columns[l]||{};if(d.hidden)return!1;const c={};!d.notSortable&&n&&(c["data-sortable"]="true"),t.sorted&&(c.class=t.sorted,c["aria-sort"]="asc"===t.sorted?"ascending":"descending");let h="";return s[l]&&!a&&(h+=`width: ${s[l]}%;`),o.length&&!r&&(h+="padding-bottom: 0;padding-top: 0;border: 0;"),h.length&&(c.style=h),{nodeName:"TH",attributes:c,childNodes:[!i&&!o.length||r?d.notSortable||!n?{nodeName:"#text",data:t.data}:{nodeName:"a",attributes:{href:"#",class:"datatable-sorter"},childNodes:[{nodeName:"#text",data:t.data}]}:{nodeName:"#text",data:""}]}})).filter((t=>t))}),T=(e,s,i,n,o,{hiddenHeader:a,header:r,footer:l,sortable:d,scrollY:c,rowRender:h,tabIndex:u},{noColumnWidths:p,unhideHeader:f,renderHeader:m})=>{const g={nodeName:"TABLE",attributes:{class:"datatable-table"},childNodes:[{nodeName:"TBODY",childNodes:s.map((({row:e,index:s})=>{const a={nodeName:"TR",attributes:{"data-index":s},childNodes:e.map(((e,o)=>{const a=i.columns[o]||{};if(a.hidden)return!1;const d="node"===e.type?{nodeName:"TD",childNodes:e.data}:{nodeName:"TD",childNodes:[{nodeName:"#text",data:String(e.data)}]};if(r||l||!n[o]||p||(d.attributes={style:`width: ${n[o]}%;`}),a.render){const i=a.render(e.data,d,s,o);if(i){if("string"!=typeof i)return i;{const e=t(`<td>${i}</td>`);1!==!e.childNodes.length||"#text"!==e.childNodes[0].nodeName?d.childNodes=e.childNodes:d.childNodes[0].data=i}}}return d})).filter((t=>t))};if(s===o&&(a.attributes.class="datatable-cursor"),h){const i=h(e,a,s);if(i){if("string"!=typeof i)return i;{const e=t(`<tr>${i}</tr>`);!e.childNodes||1===e.childNodes.length&&"#text"===e.childNodes[0].nodeName?a.childNodes[0].data=i:a.childNodes=e.childNodes}}}return a}))}]};if(r||l||m){const t=A(e,i,n,{hiddenHeader:a,sortable:d,scrollY:c},{noColumnWidths:p,unhideHeader:f});if(r||m){const e={nodeName:"THEAD",childNodes:[t]};!c.length&&!a||f||(e.attributes={style:"height: 0px;"}),g.childNodes.unshift(e)}if(l){const e={nodeName:"TFOOT",childNodes:[r?structuredClone(t):t]};!c.length&&!a||f||(e.attributes={style:"height: 0px;"}),g.childNodes.push(e)}}return!1!==u&&(g.attributes.tabindex=String(u)),g};var L={exports:{}},P=L.exports=function(){var t=1e3,e=6e4,s=36e5,i="millisecond",n="second",o="minute",a="hour",r="day",l="week",d="month",c="quarter",h="year",u="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(t,e,s){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(s)+t},b={s:v,z:function(t){var e=-t.utcOffset(),s=Math.abs(e),i=Math.floor(s/60),n=s%60;return(e<=0?"+":"-")+v(i,2,"0")+":"+v(n,2,"0")},m:function t(e,s){if(e.date()<s.date())return-t(s,e);var i=12*(s.year()-e.year())+(s.month()-e.month()),n=e.clone().add(i,d),o=s-n<0,a=e.clone().add(i+(o?-1:1),d);return+(-(i+(s-n)/(o?n-a:a-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:d,y:h,w:l,d:r,D:u,h:a,m:o,s:n,ms:i,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},w="en",y={};y[w]=g;var N=function(t){return t instanceof D},_=function t(e,s,i){var n;if(!e)return w;if("string"==typeof e){var o=e.toLowerCase();y[o]&&(n=o),s&&(y[o]=s,n=o);var a=e.split("-");if(!n&&a.length>1)return t(a[0])}else{var r=e.name;y[r]=e,n=r}return!i&&n&&(w=n),n||!i&&w},x=function(t,e){if(N(t))return t.clone();var s="object"==typeof e?e:{};return s.date=t,s.args=arguments,new D(s)},V=b;V.l=_,V.i=N,V.w=function(t,e){return x(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var D=function(){function g(t){this.$L=_(t.locale,null,!0),this.parse(t)}var v=g.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,s=t.utc;if(null===e)return new Date(NaN);if(V.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(f);if(i){var n=i[2]-1||0,o=(i[7]||"0").substring(0,3);return s?new Date(Date.UTC(i[1],n,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],n,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return V},v.isValid=function(){return!(this.$d.toString()===p)},v.isSame=function(t,e){var s=x(t);return this.startOf(e)<=s&&s<=this.endOf(e)},v.isAfter=function(t,e){return x(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<x(t)},v.$g=function(t,e,s){return V.u(t)?this[e]:this.set(s,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var s=this,i=!!V.u(e)||e,c=V.p(t),p=function(t,e){var n=V.w(s.$u?Date.UTC(s.$y,e,t):new Date(s.$y,e,t),s);return i?n:n.endOf(r)},f=function(t,e){return V.w(s.toDate()[t].apply(s.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(e)),s)},m=this.$W,g=this.$M,v=this.$D,b="set"+(this.$u?"UTC":"");switch(c){case h:return i?p(1,0):p(31,11);case d:return i?p(1,g):p(0,g+1);case l:var w=this.$locale().weekStart||0,y=(m<w?m+7:m)-w;return p(i?v-y:v+(6-y),g);case r:case u:return f(b+"Hours",0);case a:return f(b+"Minutes",1);case o:return f(b+"Seconds",2);case n:return f(b+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var s,l=V.p(t),c="set"+(this.$u?"UTC":""),p=(s={},s[r]=c+"Date",s[u]=c+"Date",s[d]=c+"Month",s[h]=c+"FullYear",s[a]=c+"Hours",s[o]=c+"Minutes",s[n]=c+"Seconds",s[i]=c+"Milliseconds",s)[l],f=l===r?this.$D+(e-this.$W):e;if(l===d||l===h){var m=this.clone().set(u,1);m.$d[p](f),m.init(),this.$d=m.set(u,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[V.p(t)]()},v.add=function(i,c){var u,p=this;i=Number(i);var f=V.p(c),m=function(t){var e=x(p);return V.w(e.date(e.date()+Math.round(t*i)),p)};if(f===d)return this.set(d,this.$M+i);if(f===h)return this.set(h,this.$y+i);if(f===r)return m(1);if(f===l)return m(7);var g=(u={},u[o]=e,u[a]=s,u[n]=t,u)[f]||1,v=this.$d.getTime()+i*g;return V.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,s=this.$locale();if(!this.isValid())return s.invalidDate||p;var i=t||"YYYY-MM-DDTHH:mm:ssZ",n=V.z(this),o=this.$H,a=this.$m,r=this.$M,l=s.weekdays,d=s.months,c=function(t,s,n,o){return t&&(t[s]||t(e,i))||n[s].slice(0,o)},h=function(t){return V.s(o%12||12,t,"0")},u=s.meridiem||function(t,e,s){var i=t<12?"AM":"PM";return s?i.toLowerCase():i},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:r+1,MM:V.s(r+1,2,"0"),MMM:c(s.monthsShort,r,d,3),MMMM:c(d,r),D:this.$D,DD:V.s(this.$D,2,"0"),d:String(this.$W),dd:c(s.weekdaysMin,this.$W,l,2),ddd:c(s.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:V.s(o,2,"0"),h:h(1),hh:h(2),a:u(o,a,!0),A:u(o,a,!1),m:String(a),mm:V.s(a,2,"0"),s:String(this.$s),ss:V.s(this.$s,2,"0"),SSS:V.s(this.$ms,3,"0"),Z:n};return i.replace(m,(function(t,e){return e||f[t]||n.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(i,u,p){var f,m=V.p(u),g=x(i),v=(g.utcOffset()-this.utcOffset())*e,b=this-g,w=V.m(this,g);return w=(f={},f[h]=w/12,f[d]=w,f[c]=w/3,f[l]=(b-v)/6048e5,f[r]=(b-v)/864e5,f[a]=b/s,f[o]=b/e,f[n]=b/t,f)[m]||b,p?w:V.a(w)},v.daysInMonth=function(){return this.endOf(d).$D},v.$locale=function(){return y[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var s=this.clone(),i=_(t,e,!0);return i&&(s.$L=i),s},v.clone=function(){return V.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),E=D.prototype;return x.prototype=E,[["$ms",i],["$s",n],["$m",o],["$H",a],["$W",r],["$M",d],["$y",h],["$D",u]].forEach((function(t){E[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),x.extend=function(t,e){return t.$i||(t(e,D,x),t.$i=!0),x},x.locale=_,x.isDayjs=N,x.unix=function(t){return x(1e3*t)},x.en=y[w],x.Ls=y,x.p={},x}(),H={exports:{}},R=H.exports=function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d\d/,i=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,o={},a=function(t){return(t=+t)+(t>68?1900:2e3)},r=function(t){return function(e){this[t]=+e}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(t){if(!t)return 0;if("Z"===t)return 0;var e=t.match(/([+-]|\d\d)/g),s=60*e[1]+(+e[2]||0);return 0===s?0:"+"===e[0]?-s:s}(t)}],d=function(t){var e=o[t];return e&&(e.indexOf?e:e.s.concat(e.f))},c=function(t,e){var s,i=o.meridiem;if(i){for(var n=1;n<=24;n+=1)if(t.indexOf(i(n,0,e))>-1){s=n>12;break}}else s=t===(e?"pm":"PM");return s},h={A:[n,function(t){this.afternoon=c(t,!1)}],a:[n,function(t){this.afternoon=c(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[s,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[i,r("seconds")],ss:[i,r("seconds")],m:[i,r("minutes")],mm:[i,r("minutes")],H:[i,r("hours")],h:[i,r("hours")],HH:[i,r("hours")],hh:[i,r("hours")],D:[i,r("day")],DD:[s,r("day")],Do:[n,function(t){var e=o.ordinal,s=t.match(/\d+/);if(this.day=s[0],e)for(var i=1;i<=31;i+=1)e(i).replace(/\[|\]/g,"")===t&&(this.day=i)}],M:[i,r("month")],MM:[s,r("month")],MMM:[n,function(t){var e=d("months"),s=(d("monthsShort")||e.map((function(t){return t.slice(0,3)}))).indexOf(t)+1;if(s<1)throw new Error;this.month=s%12||s}],MMMM:[n,function(t){var e=d("months").indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[/[+-]?\d+/,r("year")],YY:[s,function(t){this.year=a(t)}],YYYY:[/\d{4}/,r("year")],Z:l,ZZ:l};function u(s){var i,n;i=s,n=o&&o.formats;for(var a=(s=i.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,s,i){var o=i&&i.toUpperCase();return s||n[i]||t[i]||n[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,s){return e||s.slice(1)}))}))).match(e),r=a.length,l=0;l<r;l+=1){var d=a[l],c=h[d],u=c&&c[0],p=c&&c[1];a[l]=p?{regex:u,parser:p}:d.replace(/^\[|\]$/g,"")}return function(t){for(var e={},s=0,i=0;s<r;s+=1){var n=a[s];if("string"==typeof n)i+=n.length;else{var o=n.regex,l=n.parser,d=t.slice(i),c=o.exec(d)[0];l.call(e,c),t=t.replace(c,"")}}return function(t){var e=t.afternoon;if(void 0!==e){var s=t.hours;e?s<12&&(t.hours+=12):12===s&&(t.hours=0),delete t.afternoon}}(e),e}}return function(t,e,s){s.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(a=t.parseTwoDigitYear);var i=e.prototype,n=i.parse;i.parse=function(t){var e=t.date,i=t.utc,a=t.args;this.$u=i;var r=a[1];if("string"==typeof r){var l=!0===a[2],d=!0===a[3],c=l||d,h=a[2];d&&(h=a[2]),o=this.$locale(),!l&&h&&(o=s.Ls[h]),this.$d=function(t,e,s){try{if(["x","X"].indexOf(e)>-1)return new Date(("X"===e?1e3:1)*t);var i=u(e)(t),n=i.year,o=i.month,a=i.day,r=i.hours,l=i.minutes,d=i.seconds,c=i.milliseconds,h=i.zone,p=new Date,f=a||(n||o?1:p.getDate()),m=n||p.getFullYear(),g=0;n&&!o||(g=o>0?o-1:p.getMonth());var v=r||0,b=l||0,w=d||0,y=c||0;return h?new Date(Date.UTC(m,g,f,v,b,w,y+60*h.offset*1e3)):s?new Date(Date.UTC(m,g,f,v,b,w,y)):new Date(m,g,f,v,b,w,y)}catch(t){return new Date("")}}(e,r,i),this.init(),h&&!0!==h&&(this.$L=this.locale(h).$L),c&&e!=this.format(r)&&(this.$d=new Date("")),o={}}else if(r instanceof Array)for(var p=r.length,f=1;f<=p;f+=1){a[1]=r[f-1];var m=s.apply(this,a);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}f===p&&(this.$d=new Date(""))}else n.call(this,t)}}}();P.extend(R);const Y=t=>"[object Object]"===Object.prototype.toString.call(t),I=t=>{let e=!1;try{e=JSON.parse(t)}catch(t){return!1}return!(null===e||!Array.isArray(e)&&!Y(e))&&e},j=(t,e)=>{const s=document.createElement(t);if(e&&"object"==typeof e)for(const t in e)"html"===t?s.innerHTML=e[t]:s.setAttribute(t,e[t]);return s},B=t=>{t instanceof NodeList?t.forEach((t=>B(t))):t.innerHTML=""},W=(t,e,s)=>j("li",{class:t,html:`<a href="#" data-page="${e}">${s}</a>`}),z=t=>"#text"===t.nodeName?t.data:t.childNodes?t.childNodes.map((t=>z(t))).join(""):"",U=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},q=(e,s={})=>{if(e.constructor==Object)return e;const i={data:e};if("string"==typeof e&&e.length){const s=t(`<td>${e}</td>`);if(s.childNodes&&(1!==s.childNodes.length||"#text"!==s.childNodes[0].nodeName)){i.data=s.childNodes,i.type="node";const t=z(s);i.text=t,i.order=t}}return"date"===s.type&&s.format&&(i.order=((t,e)=>{let s=!1;if(e)switch(e){case"ISO_8601":s=t;break;case"RFC_2822":s=P(t.slice(5),"DD MMM YYYY HH:mm:ss ZZ").unix();break;case"MYSQL":s=P(t,"YYYY-MM-DD hh:mm:ss").unix();break;case"UNIX":s=P(t).unix();break;default:s=P(t,e,!0).valueOf()}return s})(e,s.format)),i},J=(t,e=!1,s)=>{var i,n;const o={data:[],headings:[]};if((null==t?void 0:t.data)?o.data=t.data.map((t=>t.map(((t,e)=>q(t,s.columns[e]))))):(null==e?void 0:e.tBodies.length)&&(o.data=Array.from(e.tBodies[0].rows).map((t=>Array.from(t.cells).map(((t,e)=>q(t.dataset.content||t.innerHTML,s.columns[e])))))),(null==t?void 0:t.headings)?o.headings=t.headings.map((t=>({data:t,sorted:!1}))):(null==e?void 0:e.tHead)?o.headings=Array.from(e.tHead.querySelectorAll("th")).map((t=>{const e={data:t.innerHTML,sorted:!1};return e.sortable="false"!==t.dataset.sortable,e})):(null===(n=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.data)||void 0===n?void 0:n.length)?o.headings=t.data.data[0].map((t=>"")):(null==e?void 0:e.tBodies.length)&&(o.headings=Array.from(e.tBodies[0].rows[0].cells).map((t=>""))),o.data.length&&o.data[0].length!==o.headings.length)throw new Error("Data heading length mismatch.");return o};class F{constructor(t){this.dt=t,this.cursor=!1}setCursor(t=!1){if(t===this.cursor)return;const e=this.cursor;if(this.cursor=t,this.dt.renderTable(),!1!==t&&this.dt.options.scrollY){const t=this.dt.dom.querySelector("tr.datatable-cursor");t&&t.scrollIntoView({block:"nearest"})}this.dt.emit("datatable.cursormove",this.cursor,e)}add(t){const e=t.map(((t,e)=>{const s=this.dt.columnSettings.columns[e]||{};return q(t,s)}));this.dt.data.data.push(e),this.dt.data.data.length&&(this.dt.hasRows=!0),this.dt.update(!1),this.dt.fixColumns()}remove(t){if(!Array.isArray(t))return this.remove([t]);this.dt.data.data=this.dt.data.data.filter(((e,s)=>!t.includes(s))),this.dt.data.data.length||(this.dt.hasRows=!1),this.dt.update(!1),this.dt.fixColumns()}findRowIndex(t,e){return this.dt.data.data.findIndex((s=>String(s[t].data).toLowerCase().includes(String(e).toLowerCase())))}findRow(t,e){const s=this.findRowIndex(t,e);if(s<0)return{index:-1,row:null,cols:[]};const i=this.dt.data.data[s],n=i.map((t=>t.data));return{index:s,row:i,cols:n}}updateRow(t,e){const s=e.map(((t,e)=>{const s=this.dt.columnSettings.columns[e]||{};return q(t,s)}));this.dt.data.data.splice(t,1,s),this.dt.update(!1),this.dt.fixColumns()}}class Z{constructor(t){this.dt=t}swap(t){if(2===t.length){const e=this.dt.data.headings.map(((t,e)=>e)),s=t[0],i=t[1],n=e[i];return e[i]=e[s],e[s]=n,this.order(e)}}order(t){this.dt.headings=t.map((t=>this.dt.headings[t])),this.dt.data.data=this.dt.data.data.map((e=>t.map((t=>e[t])))),this.dt.columnSettings.columns=t.map((t=>this.dt.columnSettings.columns[t])),this.dt.update()}hide(t){t.length&&(t.forEach((t=>{this.dt.columnSettings.columns[t]||(this.dt.columnSettings.columns[t]={});this.dt.columnSettings.columns[t].hidden=!0})),this.dt.update())}show(t){t.length&&(t.forEach((t=>{this.dt.columnSettings.columns[t]||(this.dt.columnSettings.columns[t]={});delete this.dt.columnSettings.columns[t].hidden})),this.dt.update())}visible(t){var e;return Array.isArray(t)?t.map((t=>{var e;return!(null===(e=this.dt.columnSettings.columns[t])||void 0===e?void 0:e.hidden)})):!(null===(e=this.dt.columnSettings.columns[t])||void 0===e?void 0:e.hidden)}add(t){const e=this.dt.data.headings.length;if(this.dt.data.headings=this.dt.data.headings.concat([{data:t.heading}]),this.dt.data.data=this.dt.data.data.map(((e,s)=>e.concat([q(t.data[s],t)]))),t.type||t.format||t.sortable||t.render){this.dt.columnSettings.columns[e]||(this.dt.columnSettings.columns[e]={});const s=this.dt.columnSettings.columns[e];t.type&&(s.type=t.type),t.format&&(s.format=t.format),t.sortable&&(s.sortable=t.sortable),t.filter&&(s.filter=t.filter),t.type&&(s.type=t.type)}this.dt.update(!1),this.dt.fixColumns()}remove(t){if(!Array.isArray(t))return this.remove([t]);this.dt.data.headings=this.dt.data.headings.filter(((e,s)=>!t.includes(s))),this.dt.data.data=this.dt.data.data.map((e=>e.filter(((e,s)=>!t.includes(s))))),this.dt.update(!1),this.dt.fixColumns()}filter(t,e){var s,i;if(!(null===(i=null===(s=this.dt.columnSettings.columns[t])||void 0===s?void 0:s.filter)||void 0===i?void 0:i.length))return;const n=this.dt.filterStates.find((e=>e.column===t));let o;if(n){let e=!1;o=this.dt.columnSettings.columns[t].filter.find((t=>!!e||(t===n.state&&(e=!0),!1)))}else o=this.dt.columnSettings.columns[t].filter[0];n&&o?n.state=o:n?this.dt.filterStates=this.dt.filterStates.filter((e=>e.column!==t)):this.dt.filterStates.push({column:t,state:o}),this.dt.update(),e||this.dt.emit("datatable.filter",t,o)}sort(t,e,s){var i,n;if(null===(n=null===(i=this.dt.columnSettings.columns[t])||void 0===i?void 0:i.filter)||void 0===n?void 0:n.length)return this.filter(t,s);if(s||this.dt.emit("datatable.sorting",t,e),!e){const s=this.dt.data.headings[t].sorted;e="asc"===s?"desc":"asc"}this.dt.data.headings.forEach((t=>{t.sorted=!1})),this.dt.data.data.sort(((s,i)=>{let n=s[t].order||s[t].data,o=i[t].order||i[t].data;if("desc"===e){const t=n;n=o,o=t}return n<o?-1:n>o?1:0})),this.dt.data.headings[t].sorted=e,this.dt.update(!s),s||(this.dt.columnSettings.sort={column:t,dir:e},this.dt.emit("datatable.sort",t,e))}}const X={sortable:!0,searchable:!0,destroyable:!0,paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",ascText:"▴",descText:"▾",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,header:!0,hiddenHeader:!1,footer:!1,tabIndex:!1,rowNavigation:!1,rowRender:!1,labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",noResults:"No results match your search query",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}};const G={classes:{row:"datatable-editor-row",form:"datatable-editor-form",item:"datatable-editor-item",menu:"datatable-editor-menu",save:"datatable-editor-save",block:"datatable-editor-block",close:"datatable-editor-close",inner:"datatable-editor-inner",input:"datatable-editor-input",label:"datatable-editor-label",modal:"datatable-editor-modal",action:"datatable-editor-action",header:"datatable-editor-header",wrapper:"datatable-editor-wrapper",editable:"datatable-editor-editable",container:"datatable-editor-container",separator:"datatable-editor-separator"},labels:{editCell:"Edit Cell",editRow:"Edit Row",removeRow:"Remove Row",reallyRemove:"Are you sure?"},hiddenColumns:!1,contextMenu:!0,clickEvent:"dblclick",excludeColumns:[],menuItems:[{text:t=>t.options.labels.editCell,action:(t,e)=>{const s=t.event.target.closest("td");return t.editCell(s)}},{text:t=>t.options.labels.editRow,action:(t,e)=>{const s=t.event.target.closest("tr");return t.editRow(s)}},{separator:!0},{text:t=>t.options.labels.removeRow,action:(t,e)=>{if(confirm(t.options.labels.reallyRemove)){const e=t.event.target.closest("tr");t.removeRow(e)}}}]};class Q{constructor(t,e={}){this.dt=t,this.options=Object.assign(Object.assign({},G),e)}init(){this.initialized||(this.dt.wrapper.classList.add(this.options.classes.editable),this.options.contextMenu&&(this.container=j("div",{id:this.options.classes.container}),this.wrapper=j("div",{class:this.options.classes.wrapper}),this.menu=j("ul",{class:this.options.classes.menu}),this.options.menuItems&&this.options.menuItems.length&&this.options.menuItems.forEach((t=>{const e=j("li",{class:t.separator?this.options.classes.separator:this.options.classes.item});if(!t.separator){const s=j("a",{class:this.options.classes.action,href:t.url||"#",html:"function"==typeof t.text?t.text(this):t.text});e.appendChild(s),t.action&&"function"==typeof t.action&&s.addEventListener("click",(e=>{e.preventDefault(),t.action(this,e)}))}this.menu.appendChild(e)})),this.wrapper.appendChild(this.menu),this.container.appendChild(this.wrapper),this.update()),this.data={},this.closed=!0,this.editing=!1,this.editingRow=!1,this.editingCell=!1,this.bindEvents(),setTimeout((()=>{this.initialized=!0,this.dt.emit("editable.init")}),10))}bindEvents(){this.events={context:this.context.bind(this),update:this.update.bind(this),dismiss:this.dismiss.bind(this),keydown:this.keydown.bind(this),click:this.click.bind(this)},this.dt.dom.addEventListener(this.options.clickEvent,this.events.click),document.addEventListener("click",this.events.dismiss),document.addEventListener("keydown",this.events.keydown),this.options.contextMenu&&(this.dt.dom.addEventListener("contextmenu",this.events.context),this.events.reset=function(t,e=300){let s;return(...i)=>{clearTimeout(s),s=setTimeout((()=>{t.apply(this,i)}),e)}}(this.events.update,50),window.addEventListener("resize",this.events.reset),window.addEventListener("scroll",this.events.reset))}context(t){this.event=t;const e=t.target.closest("tbody td");if(this.options.contextMenu&&!this.disabled&&e){t.preventDefault();let e=t.pageX,s=t.pageY;e>this.limits.x&&(e-=this.rect.width),s>this.limits.y&&(s-=this.rect.height),this.wrapper.style.top=`${s}px`,this.wrapper.style.left=`${e}px`,this.openMenu(),this.update()}}click(t){if(this.editing&&this.data&&this.editingCell)this.saveCell(this.data.input.value);else if(!this.editing){const e=t.target.closest("tbody td");e&&(this.editCell(e),t.preventDefault())}}keydown(t){this.modal?"Escape"===t.key?this.closeModal():"Enter"===t.key&&this.saveRow(this.data.inputs.map((t=>t.value.trim())),this.data.row):this.editing&&this.data&&("Enter"===t.key?this.editingCell?this.saveCell(this.data.input.value):this.editingRow&&this.saveRow(this.data.inputs.map((t=>t.value.trim())),this.data.row):"Escape"===t.key&&this.saveCell(this.data.content))}editCell(t){let e=0,s=0;for(;s<t.cellIndex;){(this.dt.columnSettings.columns[e]||{}).hidden||(s+=1),e+=1}if(this.options.excludeColumns.includes(e))return void this.closeMenu();const i=parseInt(t.parentNode.dataset.index,10),n=this.dt.data.data[i][e];this.data={cell:n,rowIndex:i,columnIndex:e,content:n.text||String(n.data)};const o=[`<div class='${this.options.classes.inner}'>`,`<div class='${this.options.classes.header}'>`,"<h4>Editing cell</h4>",`<button class='${this.options.classes.close}' type='button' data-editor-close>×</button>`," </div>",`<div class='${this.options.classes.block}'>`,`<form class='${this.options.classes.form}'>`,`<div class='${this.options.classes.row}'>`,`<label class='${this.options.classes.label}'>${U(this.dt.data.headings[e].data)}</label>`,`<input class='${this.options.classes.input}' value='${U(n.text||String(n.data)||"")}' type='text'>`,"</div>",`<div class='${this.options.classes.row}'>`,`<button class='${this.options.classes.save}' type='button' data-editor-save>Save</button>`,"</div>","</form>","</div>","</div>"].join(""),a=j("div",{class:this.options.classes.modal,html:o});this.modal=a,this.openModal(),this.editing=!0,this.editingCell=!0,this.data.input=a.querySelector("input[type=text]"),this.data.input.focus(),this.data.input.selectionStart=this.data.input.selectionEnd=this.data.input.value.length,a.addEventListener("click",(t=>{t.target.hasAttribute("data-editor-close")?this.closeModal():t.target.hasAttribute("data-editor-save")&&this.saveCell(this.data.input.value)})),this.closeMenu()}saveCell(t){const e=this.data.content;this.dt.data.data[this.data.rowIndex][this.data.columnIndex]={data:t.trim()},this.closeModal(),this.dt.fixColumns(),this.dt.emit("editable.save.cell",t,e,this.data.rowIndex,this.data.columnIndex),this.data={}}editRow(t){var e;if(!t||"TR"!==t.nodeName||this.editing)return;const s=parseInt(t.dataset.index,10),i=this.dt.data.data[s],n=[`<div class='${this.options.classes.inner}'>`,`<div class='${this.options.classes.header}'>`,"<h4>Editing row</h4>",`<button class='${this.options.classes.close}' type='button' data-editor-close>×</button>`," </div>",`<div class='${this.options.classes.block}'>`,`<form class='${this.options.classes.form}'>`,`<div class='${this.options.classes.row}'>`,`<button class='${this.options.classes.save}' type='button' data-editor-save>Save</button>`,"</div>","</form>","</div>","</div>"].join(""),o=j("div",{class:this.options.classes.modal,html:n}),a=o.firstElementChild;if(!a)return;const r=null===(e=a.lastElementChild)||void 0===e?void 0:e.firstElementChild;if(!r)return;i.forEach(((t,e)=>{const s=this.dt.columnSettings.columns[e]||{};(!s.hidden||s.hidden&&this.options.hiddenColumns)&&!this.options.excludeColumns.includes(e)&&r.insertBefore(j("div",{class:this.options.classes.row,html:[`<div class='${this.options.classes.row}'>`,`<label class='${this.options.classes.label}'>${U(this.dt.data.headings[e].data)}</label>`,`<input class='${this.options.classes.input}' value='${U(t.text||String(t.data)||"")}' type='text'>`,"</div>"].join("")}),r.lastElementChild)})),this.modal=o,this.openModal();const l=Array.from(r.querySelectorAll("input[type=text]"));l.pop(),this.data={row:i,inputs:l,dataIndex:s},this.editing=!0,this.editingRow=!0,o.addEventListener("click",(t=>{t.target.hasAttribute("data-editor-close")?this.closeModal():t.target.hasAttribute("data-editor-save")&&this.saveRow(this.data.inputs.map((t=>t.value.trim())),this.data.row)})),this.closeMenu()}saveRow(t,e){const s=e.map((t=>t.text||String(t.data)));this.dt.rows.updateRow(this.data.dataIndex,t),this.data={},this.closeModal(),this.dt.emit("editable.save.row",t,s,e)}openModal(){!this.editing&&this.modal&&document.body.appendChild(this.modal)}closeModal(){this.editing&&this.modal&&(document.body.removeChild(this.modal),this.modal=this.editing=this.editingRow=this.editingCell=!1)}removeRow(t){if(!t||"TR"!==t.nodeName||this.editing)return;const e=parseInt(t.dataset.index,10);this.dt.rows.remove(e),this.closeMenu()}update(){const t=window.scrollX||window.pageXOffset,e=window.scrollY||window.pageYOffset;this.rect=this.wrapper.getBoundingClientRect(),this.limits={x:window.innerWidth+t-this.rect.width,y:window.innerHeight+e-this.rect.height}}dismiss(t){let e=!0;this.options.contextMenu&&(e=!this.wrapper.contains(t.target),this.editing&&(e=!this.wrapper.contains(t.target)&&t.target!==this.data.input)),e&&(this.editingCell&&this.saveCell(this.data.content),this.closeMenu())}openMenu(){this.editing&&this.data&&this.editingCell&&this.saveCell(this.data.input.value),this.options.contextMenu&&(document.body.appendChild(this.container),this.closed=!1,this.dt.emit("editable.context.open"))}closeMenu(){this.options.contextMenu&&!this.closed&&(this.closed=!0,document.body.removeChild(this.container),this.dt.emit("editable.context.close"))}destroy(){this.dt.dom.removeEventListener(this.options.clickEvent,this.events.click),this.dt.dom.removeEventListener("contextmenu",this.events.context),document.removeEventListener("click",this.events.dismiss),document.removeEventListener("keydown",this.events.keydown),window.removeEventListener("resize",this.events.reset),window.removeEventListener("scroll",this.events.reset),document.body.contains(this.container)&&document.body.removeChild(this.container),this.initialized=!1}}exports.DataTable=class{constructor(t,e={}){this.dom="string"==typeof t?document.querySelector(t):t,this.options=Object.assign(Object.assign(Object.assign({},X),e),{layout:Object.assign(Object.assign({},X.layout),e.layout),labels:Object.assign(Object.assign({},X.labels),e.labels)}),this.initialInnerHTML=this.options.destroyable?this.dom.innerHTML:"",this.options.tabIndex?this.dom.tabIndex=this.options.tabIndex:this.options.rowNavigation&&-1===this.dom.tabIndex&&(this.dom.tabIndex=0),this.listeners={onResize:t=>this.onResize(t)},this.dd=new s,this.initialized=!1,this.events={},this.data=!1,this.virtualDOM=!1,this.virtualHeaderDOM=!1,this.headerDOM=!1,this.currentPage=0,this.onFirstPage=!0,this.hasHeadings=!1,this.hasRows=!1,this.columnWidths=[],this.columnSettings=!1,this.filterStates=[],this.init()}init(){if(this.initialized||this.dom.classList.contains("datatable-table"))return!1;this.rows=new F(this),this.columns=new Z(this),this.columnSettings=((t=[])=>{const e=[];let s=!1;return t.forEach((t=>{(Array.isArray(t.select)?t.select:[t.select]).forEach((i=>{e[i]||(e[i]={});const n=e[i];t.render&&(n.render=t.render),t.type&&(n.type=t.type),t.format&&(n.format=t.format),!1===t.sortable&&(n.notSortable=!0),t.hidden&&(n.hidden=!0),t.filter&&(n.filter=t.filter),t.sort&&(s={column:n,dir:t.sort})}))})),{columns:e,sort:s}})(this.options.columns),this.data=J(this.options.data,this.dom,this.columnSettings),this.hasRows=Boolean(this.data.data.length),this.hasHeadings=Boolean(this.data.headings.length),this.virtualDOM=e(this.dom),this.render(),setTimeout((()=>{this.emit("datatable.init"),this.initialized=!0}),10)}render(){this.wrapper=j("div",{class:"datatable-wrapper datatable-loading"});let t="";if(t+="<div class='datatable-top'>",t+=this.options.layout.top,t+="</div>",this.options.scrollY.length?t+=`<div class='datatable-container' style='height: ${this.options.scrollY}; overflow-Y: auto;'></div>`:t+="<div class='datatable-container'></div>",t+="<div class='datatable-bottom'>",t+=this.options.layout.bottom,t+="</div>",t=t.replace("{info}",this.options.paging?"<div class='datatable-info'></div>":""),this.options.paging&&this.options.perPageSelect){let e="<div class='datatable-dropdown'><label>";e+=this.options.labels.perPage,e+="</label></div>";const s=j("select",{class:"datatable-selector"});this.options.perPageSelect.forEach((t=>{const e=t===this.options.perPage,i=new Option(t,t,e,e);s.appendChild(i)})),e=e.replace("{select}",s.outerHTML),t=t.replace("{select}",e)}else t=t.replace("{select}","");if(this.options.searchable){const e=`<div class='datatable-search'><input class='datatable-input' placeholder='${this.options.labels.placeholder}' type='text'></div>`;t=t.replace("{search}",e)}else t=t.replace("{search}","");const e=j("nav",{class:"datatable-pagination"}),s=j("ul",{class:"datatable-pagination-list"});e.appendChild(s),t=t.replace(/\{pager\}/g,e.outerHTML),this.wrapper.innerHTML=t,this.container=this.wrapper.querySelector(".datatable-container"),this.pagers=this.wrapper.querySelectorAll(".datatable-pagination-list"),this.label=this.wrapper.querySelector(".datatable-info"),this.dom.parentNode.replaceChild(this.wrapper,this.dom),this.container.appendChild(this.dom),this.rect=this.dom.getBoundingClientRect(),this.update(!1),this.fixHeight(),this.options.header||this.wrapper.classList.add("no-header"),this.options.footer||this.wrapper.classList.add("no-footer"),this.options.sortable&&this.wrapper.classList.add("sortable"),this.options.searchable&&this.wrapper.classList.add("searchable"),this.options.fixedHeight&&this.wrapper.classList.add("fixed-height"),this.options.fixedColumns&&this.wrapper.classList.add("fixed-columns"),this.bindEvents(),this.columnSettings.sort&&this.columns.sort(this.columnSettings.sort.column,this.columnSettings.sort.dir,!0),this.fixColumns()}renderTable(t={}){const e=T(this.data.headings,this.options.paging&&this.currentPage&&!t.noPaging?this.pages[this.currentPage-1]:this.data.data.map(((t,e)=>({row:t,index:e}))),this.columnSettings,this.columnWidths,this.rows.cursor,this.options,t),s=this.dd.diff(this.virtualDOM,e);this.dd.apply(this.dom,s),this.virtualDOM=e}renderPage(t=!0,e=!1){this.hasRows&&this.totalPages?(this.currentPage>this.totalPages&&(this.currentPage=1),t&&this.renderTable(),this.onFirstPage=1===this.currentPage,this.onLastPage=this.currentPage===this.lastPage):this.setMessage(this.options.labels.noRows);let s,i=0,n=0,o=0;if(this.totalPages&&(i=this.currentPage-1,n=i*this.options.perPage,o=n+this.pages[i].length,n+=1,s=this.searching?this.searchData.length:this.data.data.length),this.label&&this.options.labels.info.length){const t=this.options.labels.info.replace("{start}",n).replace("{end}",o).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",s);this.label.innerHTML=s?t:""}if(1==this.currentPage&&this.fixHeight(),this.options.rowNavigation&&(!this.rows.cursor||!this.pages[this.currentPage-1].find((t=>t.index===this.rows.cursor)))){const t=this.pages[this.currentPage-1];e?this.rows.setCursor(t[t.length-1].index):this.rows.setCursor(t[0].index)}}renderPager(){if(B(this.pagers),this.totalPages>1){const t="pager",e=document.createDocumentFragment(),s=this.onFirstPage?1:this.currentPage-1,i=this.onLastPage?this.totalPages:this.currentPage+1;this.options.firstLast&&e.appendChild(W(t,1,this.options.firstText)),this.options.nextPrev&&!this.onFirstPage&&e.appendChild(W(t,s,this.options.prevText));let n=this.links;this.options.truncatePager&&(n=((t,e,s,i,n)=>{let o;const a=2*(i=i||2);let r=e-i,l=e+i;const d=[],c=[];e<4-i+a?l=3+a:e>s-(3-i+a)&&(r=s-(2+a));for(let e=1;e<=s;e++)if(1==e||e==s||e>=r&&e<=l){const s=t[e-1];s.classList.remove("active"),d.push(s)}return d.forEach((e=>{const s=e.children[0].getAttribute("data-page");if(o){const e=o.children[0].getAttribute("data-page");if(s-e==2)c.push(t[e]);else if(s-e!=1){const t=j("li",{class:"ellipsis",html:`<a href="#">${n}</a>`});c.push(t)}}c.push(e),o=e})),c})(this.links,this.currentPage,this.pages.length,this.options.pagerDelta,this.options.ellipsisText)),this.links[this.currentPage-1].classList.add("active"),n.forEach((t=>{t.classList.remove("active"),e.appendChild(t)})),this.links[this.currentPage-1].classList.add("active"),this.options.nextPrev&&!this.onLastPage&&e.appendChild(W(t,i,this.options.nextText)),this.options.firstLast&&e.appendChild(W(t,this.totalPages,this.options.lastText)),this.pagers.forEach((t=>{t.appendChild(e.cloneNode(!0))}))}}bindEvents(){if(this.options.perPageSelect){const t=this.wrapper.querySelector(".datatable-selector");t&&t.addEventListener("change",(()=>{this.options.perPage=parseInt(t.value,10),this.update(),this.fixHeight(),this.emit("datatable.perpage",this.options.perPage)}),!1)}this.options.searchable&&(this.input=this.wrapper.querySelector(".datatable-input"),this.input&&this.input.addEventListener("keyup",(()=>this.search(this.input.value)),!1)),this.wrapper.addEventListener("click",(t=>{const e=t.target.closest("a");e&&"a"===e.nodeName.toLowerCase()&&(e.hasAttribute("data-page")?(this.page(e.getAttribute("data-page")),t.preventDefault()):this.options.sortable&&e.classList.contains("datatable-sorter")&&"false"!=e.parentNode.getAttribute("data-sortable")&&(this.columns.sort(Array.from(e.parentNode.parentNode.children).indexOf(e.parentNode)),t.preventDefault()))}),!1),this.options.rowNavigation?(this.dom.addEventListener("keydown",(t=>{if("ArrowUp"===t.key){let e;t.preventDefault(),t.stopPropagation(),this.pages[this.currentPage-1].find((t=>t.index===this.rows.cursor||(e=t,!1))),e?this.rows.setCursor(e.index):this.onFirstPage||this.page(this.currentPage-1,{lastRowCursor:!0})}else if("ArrowDown"===t.key){let e;t.preventDefault(),t.stopPropagation();const s=this.pages[this.currentPage-1].find((t=>!!e||(t.index===this.rows.cursor&&(e=!0),!1)));s?this.rows.setCursor(s.index):this.onLastPage||this.page(this.currentPage+1)}else["Enter"," "].includes(t.key)&&this.emit("datatable.selectrow",this.rows.cursor,t)})),this.dom.addEventListener("mousedown",(t=>{if(this.dom.matches(":focus")){const e=Array.from(this.dom.querySelectorAll("body tr")).find((e=>e.contains(t.target)));this.emit("datatable.selectrow",parseInt(e.dataset.index,10),t)}}))):this.dom.addEventListener("mousedown",(t=>{const e=Array.from(this.dom.querySelectorAll("body tr")).find((e=>e.contains(t.target)));this.emit("datatable.selectrow",parseInt(e.dataset.index,10),t)})),window.addEventListener("resize",this.listeners.onResize)}onResize(){this.rect=this.container.getBoundingClientRect(),this.rect.width&&this.fixColumns()}destroy(){this.options.destroyable&&(this.dom.innerHTML=this.initialInnerHTML,this.dom.classList.remove("datatable-table"),this.wrapper.parentNode.replaceChild(this.dom,this.wrapper),this.initialized=!1,window.removeEventListener("resize",this.listeners.onResize))}update(t=!0){this.wrapper.classList.remove("datatable-empty"),this.paginate(),this.renderPage(t),this.links=[];let e=this.pages.length;for(;e--;){const t=e+1;this.links[e]=W(0===e?"active":"",t,t)}this.renderPager(),this.emit("datatable.update")}paginate(){let t=this.data.data.map(((t,e)=>({row:t,index:e})));return this.searching&&(t=[],this.searchData.forEach((e=>t.push({index:e,row:this.data.data[e]})))),this.filterStates.length&&this.filterStates.forEach((e=>{t=t.filter((t=>"function"==typeof e.state?e.state(t.row[e.column].data):t.row[e.column].data===e.state))})),this.options.paging?this.pages=t.map(((e,s)=>s%this.options.perPage==0?t.slice(s,s+this.options.perPage):null)).filter((t=>t)):this.pages=[t],this.totalPages=this.lastPage=this.pages.length,this.currentPage=1,this.totalPages}fixColumns(){var t,e,s,i;const n=this.data.headings.filter(((t,e)=>{var s;return!(null===(s=this.columnSettings.columns[e])||void 0===s?void 0:s.hidden)}));if((this.options.scrollY.length||this.options.fixedColumns)&&(null==n?void 0:n.length)){this.columnWidths=[];const n={noPaging:!0};if(this.options.header||this.options.footer){this.options.scrollY.length&&(n.unhideHeader=!0),this.headerDOM&&this.headerDOM.parentElement.removeChild(this.headerDOM),n.noColumnWidths=!0,this.renderTable(n);const s=Array.from((null===(e=null===(t=this.dom.querySelector("thead, tfoot"))||void 0===t?void 0:t.firstElementChild)||void 0===e?void 0:e.children)||[]).map((t=>t.offsetWidth)),i=s.reduce(((t,e)=>t+e),0);if(this.columnWidths=s.map((t=>t/i*100)),this.options.scrollY.length){const t=this.dom.parentElement;this.headerDOM||(this.headerDOM=document.createElement("div"),this.virtualHeaderDOM={nodeName:"DIV"}),t.parentElement.insertBefore(this.headerDOM,t);const e={nodeName:"DIV",attributes:{class:"datatable-headercontainer"},childNodes:[{nodeName:"TABLE",attributes:{class:"datatable-table"},childNodes:[{nodeName:"THEAD",childNodes:[A(this.data.headings,this.columnSettings,this.columnWidths,this.options,{unhideHeader:!0})]}]}]},s=this.dd.diff(this.virtualHeaderDOM,e);this.dd.apply(this.headerDOM,s),this.virtualHeaderDOM=e;const i=this.headerDOM.firstElementChild.clientWidth-this.dom.clientWidth;if(i){const t=structuredClone(this.virtualHeaderDOM);t.attributes.style=`padding-right: ${i}px;`;const e=this.dd.diff(this.virtualHeaderDOM,t);this.dd.apply(this.headerDOM,e),this.virtualHeaderDOM=t}t.scrollHeight>t.clientHeight&&(t.style.overflowY="scroll")}}else{n.renderHeader=!0,this.renderTable(n);const t=Array.from((null===(i=null===(s=this.dom.querySelector("thead, tfoot"))||void 0===s?void 0:s.firstElementChild)||void 0===i?void 0:i.children)||[]).map((t=>t.offsetWidth)),e=t.reduce(((t,e)=>t+e),0);this.columnWidths=t.map((t=>t/e*100))}this.renderTable()}}fixHeight(){this.options.fixedHeight&&(this.container.style.height=null,this.rect=this.container.getBoundingClientRect(),this.container.style.height=`${this.rect.height}px`)}search(t){return!!this.hasRows&&(t=t.toLowerCase(),this.currentPage=1,this.searching=!0,this.searchData=[],t.length?(this.data.data.forEach(((e,s)=>{const i=this.searchData.includes(e),n=t.split(" ").reduce(((t,s)=>{let i=!1,n=null,o=null;for(let t=0;t<e.length;t++)if(n=e[t],o=n.text||String(n.data),this.columns.visible(t)&&o.toLowerCase().includes(s)){i=!0;break}return t&&i}),!0);n&&!i&&this.searchData.push(s)})),this.wrapper.classList.add("search-results"),this.searchData.length?this.update():(this.wrapper.classList.remove("search-results"),this.setMessage(this.options.labels.noResults)),void this.emit("datatable.search",t,this.searchData)):(this.searching=!1,this.update(),this.emit("datatable.search",t,this.searchData),this.wrapper.classList.remove("search-results"),!1))}page(t,e=!1){return t!==this.currentPage&&(isNaN(t)||(this.currentPage=parseInt(t,10)),!(t>this.pages.length||t<0)&&(this.renderPage(void 0,e),this.renderPager(),void this.emit("datatable.page",t)))}insert(t){let e=[];if(Y(t))t.headings&&(this.hasHeadings||this.hasRows||(this.data=J(t,void 0,this.columnSettings),this.hasRows=Boolean(this.data.data.length),this.hasHeadings=Boolean(this.data.headings.length))),t.data&&Array.isArray(t.data)&&(e=t.data);else if(Array.isArray(t)){const s=this.data.headings.map((t=>t.data));t.forEach((t=>{const i=[];Object.entries(t).forEach((([t,e])=>{const n=s.indexOf(t);n>-1&&(i[n]=e)})),e.push(i)}))}e.length&&(e.forEach((t=>this.data.data.push(t.map(((t,e)=>q(t,this.columnSettings.columns[e])))))),this.hasRows=!0),this.columnSettings.sort?this.columns.sort(this.columnSettings.sort.column,this.columnSettings.sort.dir,!0):this.update(!1),this.fixColumns()}refresh(){this.options.searchable&&(this.input.value="",this.searching=!1),this.currentPage=1,this.onFirstPage=!0,this.update(),this.emit("datatable.refresh")}print(){const t=j("table"),e=T(this.data.headings,this.data.data.map(((t,e)=>({row:t,index:e}))),this.columnSettings,this.columnWidths,!1,this.options,{noColumnWidths:!0,unhideHeader:!0}),s=this.dd.diff({nodeName:"TABLE"},e);this.dd.apply(t,s);const i=window.open();i.document.body.appendChild(t),i.print()}setMessage(t){const e=this.data.headings.filter(((t,e)=>{var s;return!(null===(s=this.columnSettings.columns[e])||void 0===s?void 0:s.hidden)})).length||1;this.wrapper.classList.add("datatable-empty"),this.label&&(this.label.innerHTML=""),this.totalPages=0,this.renderPager();const s=structuredClone(this.virtualDOM);s.childNodes.find((t=>"TBODY"===t.nodeName)).childNodes=[{nodeName:"TR",childNodes:[{nodeName:"TD",attributes:{class:"dataTables-empty",colspan:e},childNodes:[{nodeName:"#text",data:t}]}]}];const i=this.dd.diff(this.virtualDOM,s);this.dd.apply(this.dom,i),this.virtualDOM=s}on(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)}off(t,e){t in this.events!=!1&&this.events[t].splice(this.events[t].indexOf(e),1)}emit(t,...e){if(t in this.events!=!1)for(let s=0;s<this.events[t].length;s++)this.events[t][s](...e)}},exports.convertCSV=function(t={}){let e=!1;if(!Y(t))return!1;const s=Object.assign(Object.assign({},{lineDelimiter:"\n",columnDelimiter:",",removeDoubleQuotes:!1}),t);if(s.data.length||Y(s.data)){e={data:[]};const t=s.data.split(s.lineDelimiter);if(t.length&&(s.headings&&(e.headings=t[0].split(s.columnDelimiter),s.removeDoubleQuotes&&(e.headings=e.headings.map((t=>t.trim().replace(/(^"|"$)/g,"")))),t.shift()),t.forEach(((t,i)=>{e.data[i]=[];const n=t.split(s.columnDelimiter);n.length&&n.forEach((t=>{s.removeDoubleQuotes&&(t=t.trim().replace(/(^"|"$)/g,"")),e.data[i].push({data:t})}))}))),e)return e}return!1},exports.convertJSON=function(t={}){let e=!1;if(!Y(t))return!1;const s=Object.assign(Object.assign({},{data:""}),t);if(s.data.length||Y(s.data)){const t=I(s.data);if(t?(e={headings:[],data:[]},t.forEach(((t,s)=>{e.data[s]=[],Object.entries(t).forEach((([t,i])=>{e.headings.includes(t)||e.headings.push(t),(null==i?void 0:i.constructor)==Object?e.data[s].push(i):e.data[s].push({data:i})}))}))):console.warn("That's not valid JSON!"),e)return e}return!1},exports.createElement=j,exports.exportCSV=function(t,e={}){if(!t.hasHeadings&&!t.hasRows)return!1;if(!Y(e))return!1;const s=Object.assign(Object.assign({},{download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:","}),e),i=e=>{var i;return!s.skipColumn.includes(e)&&!(null===(i=t.columnSettings.columns[e])||void 0===i?void 0:i.hidden)};let n=[];const o=t.data.headings.filter(((t,e)=>i(e))).map((t=>t.data));if(n[0]=o,s.selection)if(isNaN(s.selection)){if(Array.isArray(s.selection))for(let e=0;e<s.selection.length;e++)n=n.concat(t.pages[s.selection[e]-1].map((t=>t.row.filter(((t,e)=>i(e))).map((t=>t.text||t.data)))))}else n=n.concat(t.pages[s.selection-1].map((t=>t.row.filter(((t,e)=>i(e))).map((t=>t.text||t.data)))));else n=n.concat(t.data.data.map((t=>t.filter(((t,e)=>i(e))).map((t=>t.text||t.data)))));if(n.length){let t="";if(n.forEach((e=>{e.forEach((e=>{"string"==typeof e&&(e=(e=(e=(e=(e=e.trim()).replace(/\s{2,}/g," ")).replace(/\n/g,"  ")).replace(/"/g,'""')).replace(/#/g,"%23")).includes(",")&&(e=`"${e}"`),t+=e+s.columnDelimiter})),t=t.trim().substring(0,t.length-1),t+=s.lineDelimiter})),t=t.trim().substring(0,t.length-1),s.download){const e=document.createElement("a");e.href=encodeURI(`data:text/csv;charset=utf-8,${t}`),e.download=`${s.filename||"datatable_export"}.csv`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}return t}return!1},exports.exportJSON=function(t,e={}){if(!t.hasHeadings&&!t.hasRows)return!1;if(!Y(e))return!1;const s=Object.assign(Object.assign({},{download:!0,skipColumn:[],replacer:null,space:4}),e),i=e=>{var i;return!s.skipColumn.includes(e)&&!(null===(i=t.columnSettings.columns[e])||void 0===i?void 0:i.hidden)};let n=[];if(s.selection)if(isNaN(s.selection)){if(Array.isArray(s.selection))for(let e=0;e<s.selection.length;e++)n=n.concat(t.pages[s.selection[e]-1].map((t=>t.row.filter(((t,e)=>i(e))).map((t=>"node"===t.type?t:t.data)))))}else n=n.concat(t.pages[s.selection-1].map((t=>t.row.filter(((t,e)=>i(e))).map((t=>"node"===t.type?t:t.data)))));else n=n.concat(t.data.data.map((t=>t.filter(((t,e)=>i(e))).map((t=>"node"===t.type?t:t.data)))));const o=t.data.headings.filter(((t,e)=>i(e))).map((t=>t.data));if(n.length){const t=[];n.forEach(((e,s)=>{t[s]=t[s]||{},e.forEach(((e,i)=>{t[s][o[i]]=e}))}));const e=JSON.stringify(t,s.replacer,s.space);if(s.download){const t=new Blob([e],{type:"data:application/json;charset=utf-8"}),i=URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=`${s.filename||"datatable_export"}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)}return e}return!1},exports.exportSQL=function(t,e={}){if(!t.hasHeadings&&!t.hasRows)return!1;if(!Y(e))return!1;const s=Object.assign(Object.assign({},{download:!0,skipColumn:[],tableName:"myTable"}),e),i=e=>{var i;return!s.skipColumn.includes(e)&&!(null===(i=t.columnSettings.columns[e])||void 0===i?void 0:i.hidden)};let n=[];if(s.selection)if(isNaN(s.selection)){if(Array.isArray(s.selection))for(let e=0;e<s.selection.length;e++)n=n.concat(t.pages[s.selection[e]-1].map((t=>t.row.filter(((t,e)=>i(e))).map((t=>t.data)))))}else n=n.concat(t.pages[s.selection-1].map((t=>t.row.filter(((t,e)=>i(e))).map((t=>t.data)))));else n=n.concat(t.data.data.map((t=>t.filter(((t,e)=>i(e))).map((t=>t.data)))));const o=t.data.headings.filter(((t,e)=>i(e))).map((t=>t.data));if(n.length){let t=`INSERT INTO \`${s.tableName}\` (`;if(o.forEach((e=>{t+=`\`${e}\`,`})),t=t.trim().substring(0,t.length-1),t+=") VALUES ",n.forEach((e=>{t+="(",e.forEach((e=>{t+="string"==typeof e?`"${e}",`:`${e},`})),t=t.trim().substring(0,t.length-1),t+="),"})),t=t.trim().substring(0,t.length-1),t+=";",s.download&&(t=`data:application/sql;charset=utf-8,${t}`),s.download){const e=document.createElement("a");e.href=encodeURI(t),e.download=`${s.filename||"datatable_export"}.sql`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}return t}return!1},exports.exportTXT=function(t,e={}){if(!t.hasHeadings&&!t.hasRows)return!1;if(!Y(e))return!1;const s=Object.assign(Object.assign({},{download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:","}),e),i=e=>{var i;return!s.skipColumn.includes(e)&&!(null===(i=t.columnSettings.columns[e])||void 0===i?void 0:i.hidden)};let n=[];const o=t.data.headings.filter(((t,e)=>i(e))).map((t=>t.data));if(n[0]=o,s.selection)if(isNaN(s.selection)){if(Array.isArray(s.selection))for(let e=0;e<s.selection.length;e++)n=n.concat(t.pages[s.selection[e]-1].map((t=>t.row.filter(((t,e)=>i(e))).map((t=>t.data)))))}else n=n.concat(t.pages[s.selection-1].map((t=>t.row.filter(((t,e)=>i(e))).map((t=>t.data)))));else n=n.concat(t.data.data.map((t=>t.filter(((t,e)=>i(e))).map((t=>t.data)))));if(n.length){let t="";if(n.forEach((e=>{e.forEach((e=>{"string"==typeof e&&(e=(e=(e=(e=(e=e.trim()).replace(/\s{2,}/g," ")).replace(/\n/g,"  ")).replace(/"/g,'""')).replace(/#/g,"%23")).includes(",")&&(e=`"${e}"`),t+=e+s.columnDelimiter})),t=t.trim().substring(0,t.length-1),t+=s.lineDelimiter})),t=t.trim().substring(0,t.length-1),s.download&&(t=`data:text/csv;charset=utf-8,${t}`),s.download){const e=document.createElement("a");e.href=encodeURI(t),e.download=`${s.filename||"datatable_export"}.txt`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}return t}return!1},exports.isJson=I,exports.isObject=Y,exports.makeEditable=function(t,e={}){const s=new Q(t,e);return t.initialized?s.init():t.on("datatable.init",(()=>s.init())),s};


}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[1])(1)
});
