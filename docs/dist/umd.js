(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.simpleDatatables = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function t(e,s,i){let n;return"#text"===e.nodeName?n=i.document.createTextNode(e.data):"#comment"===e.nodeName?n=i.document.createComment(e.data):(s?n=i.document.createElementNS("http://www.w3.org/2000/svg",e.nodeName):"svg"===e.nodeName.toLowerCase()?(n=i.document.createElementNS("http://www.w3.org/2000/svg","svg"),s=!0):n=i.document.createElement(e.nodeName),e.attributes&&Object.entries(e.attributes).forEach((([t,e])=>n.setAttribute(t,e))),e.childNodes&&e.childNodes.forEach((e=>n.appendChild(t(e,s,i)))),i.valueDiffing&&(e.value&&(n.value=e.value),e.checked&&(n.checked=e.checked),e.selected&&(n.selected=e.selected))),n}function e(t,e){for(e=e.slice();e.length>0;){if(!t.childNodes)return!1;const s=e.splice(0,1)[0];t=t.childNodes[s]}return t}function s(s,i,n){let o,a,l,r,d,c=e(s,i[n._const.route]);const h={diff:i,node:c};if(n.preDiffApply(h))return!0;switch(i[n._const.action]){case n._const.addAttribute:if(!c||!c.setAttribute)return!1;c.setAttribute(i[n._const.name],i[n._const.value]);break;case n._const.modifyAttribute:if(!c||!c.setAttribute)return!1;c.setAttribute(i[n._const.name],i[n._const.newValue]),"INPUT"===c.nodeName&&"value"===i[n._const.name]&&(c.value=i[n._const.newValue]);break;case n._const.removeAttribute:if(!c||!c.removeAttribute)return!1;c.removeAttribute(i[n._const.name]);break;case n._const.modifyTextElement:if(!c||3!==c.nodeType)return!1;n.textDiff(c,c.data,i[n._const.oldValue],i[n._const.newValue]);break;case n._const.modifyValue:if(!c||void 0===c.value)return!1;c.value=i[n._const.newValue];break;case n._const.modifyComment:if(!c||void 0===c.data)return!1;n.textDiff(c,c.data,i[n._const.oldValue],i[n._const.newValue]);break;case n._const.modifyChecked:if(!c||void 0===c.checked)return!1;c.checked=i[n._const.newValue];break;case n._const.modifySelected:if(!c||void 0===c.selected)return!1;c.selected=i[n._const.newValue];break;case n._const.replaceElement:c.parentNode.replaceChild(t(i[n._const.newValue],"svg"===i[n._const.newValue].nodeName.toLowerCase(),n),c);break;case n._const.relocateGroup:r=Array(...new Array(i.groupLength)).map((()=>c.removeChild(c.childNodes[i[n._const.from]]))),r.forEach(((t,e)=>{0===e&&(a=c.childNodes[i[n._const.to]]),c.insertBefore(t,a||null)}));break;case n._const.removeElement:c.parentNode.removeChild(c);break;case n._const.addElement:l=i[n._const.route].slice(),d=l.splice(l.length-1,1)[0],c=e(s,l),c.insertBefore(t(i[n._const.element],"http://www.w3.org/2000/svg"===c.namespaceURI,n),c.childNodes[d]||null);break;case n._const.removeTextElement:if(!c||3!==c.nodeType)return!1;c.parentNode.removeChild(c);break;case n._const.addTextElement:if(l=i[n._const.route].slice(),d=l.splice(l.length-1,1)[0],o=n.document.createTextNode(i[n._const.value]),c=e(s,l),!c||!c.childNodes)return!1;c.insertBefore(o,c.childNodes[d]||null);break;default:console.log("unknown action")}return h.newNode=o,n.postDiffApply(h),!0}function i(t,e,s){const i=t[e];t[e]=t[s],t[s]=i}function n(t,e,n){e.length||(e=[e]),(e=e.slice()).reverse(),e.forEach((e=>{!function(t,e,n){switch(e[n._const.action]){case n._const.addAttribute:e[n._const.action]=n._const.removeAttribute,s(t,e,n);break;case n._const.modifyAttribute:i(e,n._const.oldValue,n._const.newValue),s(t,e,n);break;case n._const.removeAttribute:e[n._const.action]=n._const.addAttribute,s(t,e,n);break;case n._const.modifyTextElement:case n._const.modifyValue:case n._const.modifyComment:case n._const.modifyChecked:case n._const.modifySelected:case n._const.replaceElement:i(e,n._const.oldValue,n._const.newValue),s(t,e,n);break;case n._const.relocateGroup:i(e,n._const.from,n._const.to),s(t,e,n);break;case n._const.removeElement:e[n._const.action]=n._const.addElement,s(t,e,n);break;case n._const.addElement:e[n._const.action]=n._const.removeElement,s(t,e,n);break;case n._const.removeTextElement:e[n._const.action]=n._const.addTextElement,s(t,e,n);break;case n._const.addTextElement:e[n._const.action]=n._const.removeTextElement,s(t,e,n);break;default:console.log("unknown action")}}(t,e,n)}))}Object.defineProperty(exports,"__esModule",{value:!0});class o{constructor(t={}){Object.entries(t).forEach((([t,e])=>this[t]=e))}toString(){return JSON.stringify(this)}setValue(t,e){return this[t]=e,this}}function a(t){const e=[];return e.push(t.nodeName),"#text"!==t.nodeName&&"#comment"!==t.nodeName&&t.attributes&&(t.attributes.class&&e.push(`${t.nodeName}.${t.attributes.class.replace(/ /g,".")}`),t.attributes.id&&e.push(`${t.nodeName}#${t.attributes.id}`)),e}function l(t){const e={},s={};return t.forEach((t=>{a(t).forEach((t=>{const i=t in e;i||t in s?i&&(delete e[t],s[t]=!0):e[t]=!0}))})),e}function r(t,e){const s=l(t),i=l(e),n={};return Object.keys(s).forEach((t=>{i[t]&&(n[t]=!0)})),n}function d(t){return delete t.outerDone,delete t.innerDone,delete t.valueDone,!t.childNodes||t.childNodes.every(d)}function c(t,e){if(!["nodeName","value","checked","selected","data"].every((s=>t[s]===e[s])))return!1;if(Boolean(t.attributes)!==Boolean(e.attributes))return!1;if(Boolean(t.childNodes)!==Boolean(e.childNodes))return!1;if(t.attributes){const s=Object.keys(t.attributes),i=Object.keys(e.attributes);if(s.length!==i.length)return!1;if(!s.every((s=>t.attributes[s]===e.attributes[s])))return!1}if(t.childNodes){if(t.childNodes.length!==e.childNodes.length)return!1;if(!t.childNodes.every(((t,s)=>c(t,e.childNodes[s]))))return!1}return!0}function h(t,e,s,i,n){if(!t||!e)return!1;if(t.nodeName!==e.nodeName)return!1;if("#text"===t.nodeName)return!!n||t.data===e.data;if(t.nodeName in s)return!0;if(t.attributes&&e.attributes){if(t.attributes.id){if(t.attributes.id!==e.attributes.id)return!1;if(`${t.nodeName}#${t.attributes.id}`in s)return!0}if(t.attributes.class&&t.attributes.class===e.attributes.class){if(`${t.nodeName}.${t.attributes.class.replace(/ /g,".")}`in s)return!0}}if(i)return!0;const o=t.childNodes?t.childNodes.slice().reverse():[],a=e.childNodes?e.childNodes.slice().reverse():[];if(o.length!==a.length)return!1;if(n)return o.every(((t,e)=>t.nodeName===a[e].nodeName));{const t=r(o,a);return o.every(((e,s)=>h(e,a[s],t,!0,!0)))}}function u(t){return JSON.parse(JSON.stringify(t))}function p(t,e,s,i){let n=0,o=[];const l=t.length,d=e.length,c=Array(...new Array(l+1)).map((()=>[])),u=r(t,e);let p=l===d;p&&t.some(((t,s)=>{const i=a(t),n=a(e[s]);return i.length!==n.length?(p=!1,!0):(i.some(((t,e)=>{if(t!==n[e])return p=!1,!0})),!p||void 0)}));for(let a=0;a<l;a++){const l=t[a];for(let t=0;t<d;t++){const r=e[t];s[a]||i[t]||!h(l,r,u,p)?c[a+1][t+1]=0:(c[a+1][t+1]=c[a][t]?c[a][t]+1:1,c[a+1][t+1]>=n&&(n=c[a+1][t+1],o=[a+1,t+1]))}}return 0!==n&&{oldValue:o[0]-n,newValue:o[1]-n,length:n}}function m(t,e){return Array(...new Array(t)).map((()=>e))}class f{constructor(){this.list=[]}add(t){this.list.push(...t)}forEach(t){this.list.forEach((e=>t(e)))}}function g(t,e){let s,i,n=t;for(e=e.slice();e.length>0;){if(!n.childNodes)return!1;i=e.splice(0,1)[0],s=n,n=n.childNodes[i]}return{node:n,parentNode:s,nodeIndex:i}}function b(t,e,s){return e.forEach((e=>{!function(t,e,s){const i=g(t,e[s._const.route]);let n=i.node;const o=i.parentNode,a=i.nodeIndex,l=[],r={diff:e,node:n};if(s.preVirtualDiffApply(r))return!0;let d,c,h,p;switch(e[s._const.action]){case s._const.addAttribute:n.attributes||(n.attributes={}),n.attributes[e[s._const.name]]=e[s._const.value],"checked"===e[s._const.name]?n.checked=!0:"selected"===e[s._const.name]?n.selected=!0:"INPUT"===n.nodeName&&"value"===e[s._const.name]&&(n.value=e[s._const.value]);break;case s._const.modifyAttribute:n.attributes[e[s._const.name]]=e[s._const.newValue];break;case s._const.removeAttribute:delete n.attributes[e[s._const.name]],0===Object.keys(n.attributes).length&&delete n.attributes,"checked"===e[s._const.name]?n.checked=!1:"selected"===e[s._const.name]?delete n.selected:"INPUT"===n.nodeName&&"value"===e[s._const.name]&&delete n.value;break;case s._const.modifyTextElement:n.data=e[s._const.newValue];break;case s._const.modifyValue:n.value=e[s._const.newValue];break;case s._const.modifyComment:n.data=e[s._const.newValue];break;case s._const.modifyChecked:n.checked=e[s._const.newValue];break;case s._const.modifySelected:n.selected=e[s._const.newValue];break;case s._const.replaceElement:d=u(e[s._const.newValue]),d.outerDone=!0,d.innerDone=!0,d.valueDone=!0,o.childNodes[a]=d;break;case s._const.relocateGroup:c=n.childNodes.splice(e[s._const.from],e.groupLength).reverse(),c.forEach((t=>n.childNodes.splice(e[s._const.to],0,t))),n.subsets&&n.subsets.forEach((t=>{if(e[s._const.from]<e[s._const.to]&&t.oldValue<=e[s._const.to]&&t.oldValue>e[s._const.from]){t.oldValue-=e.groupLength;const i=t.oldValue+t.length-e[s._const.to];i>0&&(l.push({oldValue:e[s._const.to]+e.groupLength,newValue:t.newValue+t.length-i,length:i}),t.length-=i)}else if(e[s._const.from]>e[s._const.to]&&t.oldValue>e[s._const.to]&&t.oldValue<e[s._const.from]){t.oldValue+=e.groupLength;const i=t.oldValue+t.length-e[s._const.to];i>0&&(l.push({oldValue:e[s._const.to]+e.groupLength,newValue:t.newValue+t.length-i,length:i}),t.length-=i)}else t.oldValue===e[s._const.from]&&(t.oldValue=e[s._const.to])}));break;case s._const.removeElement:o.childNodes.splice(a,1),o.subsets&&o.subsets.forEach((t=>{t.oldValue>a?t.oldValue-=1:t.oldValue===a?t.delete=!0:t.oldValue<a&&t.oldValue+t.length>a&&(t.oldValue+t.length-1===a?t.length--:(l.push({newValue:t.newValue+a-t.oldValue,oldValue:a,length:t.length-a+t.oldValue-1}),t.length=a-t.oldValue))})),n=o;break;case s._const.addElement:h=e[s._const.route].slice(),p=h.splice(h.length-1,1)[0],n=g(t,h).node,d=u(e[s._const.element]),d.outerDone=!0,d.innerDone=!0,d.valueDone=!0,n.childNodes||(n.childNodes=[]),p>=n.childNodes.length?n.childNodes.push(d):n.childNodes.splice(p,0,d),n.subsets&&n.subsets.forEach((t=>{if(t.oldValue>=p)t.oldValue+=1;else if(t.oldValue<p&&t.oldValue+t.length>p){const e=t.oldValue+t.length-p;l.push({newValue:t.newValue+t.length-e,oldValue:p+1,length:e}),t.length-=e}}));break;case s._const.removeTextElement:o.childNodes.splice(a,1),"TEXTAREA"===o.nodeName&&delete o.value,o.subsets&&o.subsets.forEach((t=>{t.oldValue>a?t.oldValue-=1:t.oldValue===a?t.delete=!0:t.oldValue<a&&t.oldValue+t.length>a&&(t.oldValue+t.length-1===a?t.length--:(l.push({newValue:t.newValue+a-t.oldValue,oldValue:a,length:t.length-a+t.oldValue-1}),t.length=a-t.oldValue))})),n=o;break;case s._const.addTextElement:h=e[s._const.route].slice(),p=h.splice(h.length-1,1)[0],d={},d.nodeName="#text",d.data=e[s._const.value],n=g(t,h).node,n.childNodes||(n.childNodes=[]),p>=n.childNodes.length?n.childNodes.push(d):n.childNodes.splice(p,0,d),"TEXTAREA"===n.nodeName&&(n.value=e[s._const.newValue]),n.subsets&&n.subsets.forEach((t=>{if(t.oldValue>=p&&(t.oldValue+=1),t.oldValue<p&&t.oldValue+t.length>p){const e=t.oldValue+t.length-p;l.push({newValue:t.newValue+t.length-e,oldValue:p+1,length:e}),t.length-=e}}));break;default:console.log("unknown action")}n.subsets&&(n.subsets=n.subsets.filter((t=>!t.delete&&t.oldValue!==t.newValue)),l.length&&(n.subsets=n.subsets.concat(l))),r.newNode=d,s.postVirtualDiffApply(r)}(t,e,s)})),!0}function v(t,e={}){const s={};if(s.nodeName=t.nodeName,"#text"===s.nodeName||"#comment"===s.nodeName)s.data=t.data;else{if(t.attributes&&t.attributes.length>0){s.attributes={};Array.prototype.slice.call(t.attributes).forEach((t=>s.attributes[t.name]=t.value))}if("TEXTAREA"===s.nodeName)s.value=t.value;else if(t.childNodes&&t.childNodes.length>0){s.childNodes=[];Array.prototype.slice.call(t.childNodes).forEach((t=>s.childNodes.push(v(t,e))))}e.valueDiffing&&(void 0!==t.checked&&t.type&&["radio","checkbox"].includes(t.type.toLowerCase())?s.checked=t.checked:void 0!==t.value&&(s.value=t.value),void 0!==t.selected&&(s.selected=t.selected))}return s}const w=/<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>/g,_=Object.create?Object.create(null):{},y=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function N(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}const x={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function V(t){const e={nodeName:"",attributes:{}};let s=t.match(/<\/?([^\s]+?)[/\s>]/);if(s&&(e.nodeName=s[1].toUpperCase(),(x[s[1]]||"/"===t.charAt(t.length-2))&&(e.voidElement=!0),e.nodeName.startsWith("!--"))){const e=t.indexOf("--\x3e");return{type:"comment",data:-1!==e?t.slice(4,e):""}}let i=new RegExp(y),n=null,o=!1;for(;!o;)if(n=i.exec(t),null===n)o=!0;else if(n[0].trim())if(n[1]){let t=n[1].trim(),s=[t,""];t.indexOf("=")>-1&&(s=t.split("=")),e.attributes[s[0]]=s[1],i.lastIndex--}else n[2]&&(e.attributes[n[2]]=n[3].trim().substring(1,n[3].length-1));return e}function E(t){return delete t.voidElement,t.childNodes&&t.childNodes.forEach((t=>E(t))),t}function T(t){return E(function(t,e={components:_}){const s=[];let i,n=-1;const o=[];let a=!1;if(0!==t.indexOf("<")){const e=t.indexOf("<");s.push({nodeName:"#text",data:-1===e?t:t.substring(0,e)})}return t.replace(w,((l,r)=>{if(a){if(l!==`</${i.nodeName}>`)return;a=!1}const d="/"!==l.charAt(1),c=l.startsWith("\x3c!--"),h=r+l.length,u=t.charAt(h);let p;if(c){const t=V(l);return n<0?(s.push(t),s):(p=o[n],p&&(p.childNodes||(p.childNodes=[]),p.childNodes.push(t)),s)}if(d&&(i=V(l),n++,"tag"===i.type&&e.components[i.nodeName]&&(i.type="component",a=!0),i.voidElement||a||!u||"<"===u||(i.childNodes||(i.childNodes=[]),i.childNodes.push({nodeName:"#text",data:N(t.slice(h,t.indexOf("<",h)))})),0===n&&s.push(i),p=o[n-1],p&&(p.childNodes||(p.childNodes=[]),p.childNodes.push(i)),o[n]=i),(!d||i.voidElement)&&(n>-1&&(i.voidElement||i.nodeName===l.slice(2,-1).toUpperCase())&&(n--,i=-1===n?s:o[n]),!a&&"<"!==u&&u)){p=-1===n?s:o[n].childNodes||[];const e=t.indexOf("<",h);let i=N(t.slice(h,-1===e?void 0:e));p.push({nodeName:"#text",data:i})}})),s[0]}(t))}class C{constructor(t,e,s){this.options=s,this.t1="undefined"!=typeof HTMLElement&&t instanceof HTMLElement?v(t,this.options):"string"==typeof t?T(t,this.options):JSON.parse(JSON.stringify(t)),this.t2="undefined"!=typeof HTMLElement&&e instanceof HTMLElement?v(e,this.options):"string"==typeof e?T(e,this.options):JSON.parse(JSON.stringify(e)),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig=v(t,this.options),this.t2Orig=v(e,this.options)),this.tracker=new f}init(){return this.findDiffs(this.t1,this.t2)}findDiffs(t,e){let s;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw new Error(`surpassed diffcap:${JSON.stringify(this.t1Orig)} -> ${JSON.stringify(this.t2Orig)}`);s=this.findNextDiff(t,e,[]),0===s.length&&(c(t,e)||(this.foundAll?console.error("Could not find remaining diffs!"):(this.foundAll=!0,d(t),s=this.findNextDiff(t,e,[])))),s.length>0&&(this.foundAll=!1,this.tracker.add(s),b(t,s,this.options))}while(s.length>0);return this.tracker.list}findNextDiff(t,e,s){let i,n;if(this.options.maxDepth&&s.length>this.options.maxDepth)return[];if(!t.outerDone){if(i=this.findOuterDiff(t,e,s),this.options.filterOuterDiff&&(n=this.options.filterOuterDiff(t,e,i),n&&(i=n)),i.length>0)return t.outerDone=!0,i;t.outerDone=!0}if(!t.innerDone){if(i=this.findInnerDiff(t,e,s),i.length>0)return i;t.innerDone=!0}if(this.options.valueDiffing&&!t.valueDone){if(i=this.findValueDiff(t,e,s),i.length>0)return t.valueDone=!0,i;t.valueDone=!0}return[]}findOuterDiff(t,e,s){const i=[];let n,a,l,r,d,c;if(t.nodeName!==e.nodeName){if(!s.length)throw new Error("Top level nodes have to be of the same kind.");return[(new o).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,u(t)).setValue(this.options._const.newValue,u(e)).setValue(this.options._const.route,s)]}if(s.length&&this.options.maxNodeDiffCount<Math.abs((t.childNodes||[]).length-(e.childNodes||[]).length))return[(new o).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,u(t)).setValue(this.options._const.newValue,u(e)).setValue(this.options._const.route,s)];if(t.data!==e.data)return"#text"===t.nodeName?[(new o).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,s).setValue(this.options._const.oldValue,t.data).setValue(this.options._const.newValue,e.data)]:[(new o).setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,s).setValue(this.options._const.oldValue,t.data).setValue(this.options._const.newValue,e.data)];for(a=t.attributes?Object.keys(t.attributes).sort():[],l=e.attributes?Object.keys(e.attributes).sort():[],r=a.length,c=0;c<r;c++)n=a[c],d=l.indexOf(n),-1===d?i.push((new o).setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,n).setValue(this.options._const.value,t.attributes[n])):(l.splice(d,1),t.attributes[n]!==e.attributes[n]&&i.push((new o).setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,n).setValue(this.options._const.oldValue,t.attributes[n]).setValue(this.options._const.newValue,e.attributes[n])));for(r=l.length,c=0;c<r;c++)n=l[c],i.push((new o).setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,n).setValue(this.options._const.value,e.attributes[n]));return i}findInnerDiff(t,e,s){const i=t.childNodes?t.childNodes.slice():[],n=e.childNodes?e.childNodes.slice():[],a=Math.max(i.length,n.length);let l=Math.abs(i.length-n.length),r=[],d=0;if(!this.options.maxChildCount||a<this.options.maxChildCount){const i=t.subsets&&t.subsetsAge--,n=i?t.subsets:t.childNodes&&e.childNodes?function(t,e){const s=t.childNodes?t.childNodes:[],i=e.childNodes?e.childNodes:[],n=m(s.length,!1),o=m(i.length,!1),a=[];let l=!0;const r=function(){return arguments[1]};for(;l;)l=p(s,i,n,o),l&&(a.push(l),Array(...new Array(l.length)).map(r).forEach((t=>{return e=t,n[l.oldValue+e]=!0,void(o[l.newValue+e]=!0);var e})));return t.subsets=a,t.subsetsAge=100,a}(t,e):[];if(n.length>0&&(r=this.attemptGroupRelocation(t,e,n,s,i),r.length>0))return r}for(let t=0;t<a;t+=1){const e=i[t],h=n[t];l&&(e&&!h?"#text"===e.nodeName?(r.push((new o).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.value,e.data)),d-=1):(r.push((new o).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.element,u(e))),d-=1):h&&!e&&("#text"===h.nodeName?r.push((new o).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.value,h.data)):r.push((new o).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.element,u(h))))),e&&h&&(!this.options.maxChildCount||a<this.options.maxChildCount?r=r.concat(this.findNextDiff(e,h,s.concat(d))):c(e,h)||(i.length>n.length?("#text"===e.nodeName?r.push((new o).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.value,e.data)):r.push((new o).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,u(e)).setValue(this.options._const.route,s.concat(d))),i.splice(t,1),t-=1,d-=1,l-=1):i.length<n.length?(r=r.concat([(new o).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,u(h)).setValue(this.options._const.route,s.concat(d))]),i.splice(t,0,{}),l-=1):r=r.concat([(new o).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,u(e)).setValue(this.options._const.newValue,u(h)).setValue(this.options._const.route,s.concat(d))]))),d+=1}return t.innerDone=!0,r}attemptGroupRelocation(t,e,s,i,n){const a=function(t,e,s){const i=t.childNodes?m(t.childNodes.length,!0):[],n=e.childNodes?m(e.childNodes.length,!0):[];let o=0;return s.forEach((t=>{const e=t.oldValue+t.length,s=t.newValue+t.length;for(let s=t.oldValue;s<e;s+=1)i[s]=o;for(let e=t.newValue;e<s;e+=1)n[e]=o;o+=1})),{gaps1:i,gaps2:n}}(t,e,s),l=a.gaps1,r=a.gaps2;let d,c,p,f,g,b,v=Math.min(l.length,r.length);const w=[];for(let a=0,m=0;a<v;m+=1,a+=1)if(!n||!0!==l[a]&&!0!==r[a]){if(!0===l[a])if(f=t.childNodes[m],"#text"===f.nodeName)if("#text"===e.childNodes[a].nodeName){if(f.data!==e.childNodes[a].data){for(b=m;t.childNodes.length>b+1&&"#text"===t.childNodes[b+1].nodeName;)if(b+=1,e.childNodes[a].data===t.childNodes[b].data){g=!0;break}if(!g)return w.push((new o).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,i.concat(a)).setValue(this.options._const.oldValue,f.data).setValue(this.options._const.newValue,e.childNodes[a].data)),w}}else w.push((new o).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,i.concat(a)).setValue(this.options._const.value,f.data)),l.splice(a,1),v=Math.min(l.length,r.length),a-=1;else w.push((new o).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,i.concat(a)).setValue(this.options._const.element,u(f))),l.splice(a,1),v=Math.min(l.length,r.length),a-=1;else if(!0===r[a])f=e.childNodes[a],"#text"===f.nodeName?(w.push((new o).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,i.concat(a)).setValue(this.options._const.value,f.data)),l.splice(a,0,!0),v=Math.min(l.length,r.length),m-=1):(w.push((new o).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,i.concat(a)).setValue(this.options._const.element,u(f))),l.splice(a,0,!0),v=Math.min(l.length,r.length),m-=1);else if(l[a]!==r[a]){if(w.length>0)return w;if(p=s[l[a]],c=Math.min(p.newValue,t.childNodes.length-p.length),c!==p.oldValue){d=!1;for(let e=0;e<p.length;e+=1)h(t.childNodes[c+e],t.childNodes[p.oldValue+e],[],!1,!0)||(d=!0);if(d)return[(new o).setValue(this.options._const.action,this.options._const.relocateGroup).setValue("groupLength",p.length).setValue(this.options._const.from,p.oldValue).setValue(this.options._const.to,c).setValue(this.options._const.route,i)]}}}else;return w}findValueDiff(t,e,s){const i=[];return t.selected!==e.selected&&i.push((new o).setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,t.selected).setValue(this.options._const.newValue,e.selected).setValue(this.options._const.route,s)),(t.value||e.value)&&t.value!==e.value&&"OPTION"!==t.nodeName&&i.push((new o).setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,t.value||"").setValue(this.options._const.newValue,e.value||"").setValue(this.options._const.route,s)),t.checked!==e.checked&&i.push((new o).setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,t.checked).setValue(this.options._const.newValue,e.checked).setValue(this.options._const.route,s)),i}}const k={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff(t,e,s,i){t.data=i},preVirtualDiffApply(){},postVirtualDiffApply(){},preDiffApply(){},postDiffApply(){},filterOuterDiff:null,compress:!1,_const:!1,document:!("undefined"==typeof window||!window.document)&&window.document};class D{constructor(t={}){if(this.options=t,Object.entries(k).forEach((([t,e])=>{Object.prototype.hasOwnProperty.call(this.options,t)||(this.options[t]=e)})),!this.options._const){const t=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"];this.options._const={},this.options.compress?t.forEach(((t,e)=>this.options._const[t]=e)):t.forEach((t=>this.options._const[t]=t))}this.DiffFinder=C}apply(t,e){return function(t,e,i){return e.every((e=>s(t,e,i)))}(t,e,this.options)}undo(t,e){return n(t,e,this.options)}diff(t,e){return new this.DiffFinder(t,e,this.options).init()}}const A=(t,e,s,{hiddenHeader:i,sortable:n,scrollY:o},{noColumnWidths:a,unhideHeader:l})=>({nodeName:"TR",childNodes:t.map(((t,r)=>{const d=e.columns[r]||{};if(d.hidden)return!1;const c={};!d.notSortable&&n&&(c["data-sortable"]=!0),t.sorted&&(c.class=t.sorted,c["aria-sort"]="asc"===t.sorted?"ascending":"descending");let h="";return s[r]&&!a&&(h+=`width: ${s[r]}%;`),i&&!l&&(h+="height: 0;"),o.length&&!l&&(h+="padding-bottom: 0;padding-top: 0;border: 0;"),h.length&&(c.style=h),{nodeName:"TH",attributes:c,childNodes:[i&&!l?{nodeName:"#text",data:""}:d.notSortable||!n?{nodeName:"#text",data:t.data}:{nodeName:"a",attributes:{href:"#",class:"dataTable-sorter"},childNodes:[{nodeName:"#text",data:t.data}]}]}})).filter((t=>t))}),O=(t,e=!1)=>{const s={data:[],headings:[]};if(t?.data?s.data=t.data.map((t=>t.map((t=>({data:t,text:t}))))):e?.tBodies.length&&(s.data=Array.from(e.tBodies[0].rows).map((t=>Array.from(t.cells).map((t=>({data:t.dataset.content||t.innerHTML,text:t.innerHTML})))))),t?.headings?s.headings=t.headings.map((t=>({data:t,sorted:!1}))):e?.tHead?s.headings=Array.from(e.tHead.querySelectorAll("th")).map((t=>{const e={data:t.innerHTML,sorted:!1};return e.sortable="false"!==t.dataset.sortable,e})):t?.data?.data?.length?s.headings=t.data.data[0].map((t=>"")):e?.tBodies.length&&(s.headings=Array.from(e.tBodies[0].rows[0].cells).map((t=>""))),s.data.length&&s.data[0].length!==s.headings.length)throw new Error("Data heading length mismatch.");return s};class M{constructor(t){this.dt=t,this.cursor=!1}setCursor(t=!1){const e=this.cursor;if(this.cursor=t,this.dt.update(),t&&this.dt.options.scrollY){const t=this.dt.dom.querySelector("dataTable-cursor");t&&t.scrollIntoView({block:"nearest"})}this.dt.emit("datatable.cursormove",this.cursor,e)}add(t){const e=t.map(((e,s)=>({text:(this.dt.columnSettings.columns[s]||{}).render?t.render(e):e,data:e})));this.dt.data.data.push(e),this.dt.data.data.length&&(this.dt.hasRows=!0),this.dt.fixColumns()}remove(t){if(!Array.isArray(t))return this.remove([t]);this.dt.data.data=this.data.data.filter(((e,s)=>!t.includes(s))),this.dt.data.data.length||(this.dt.hasRows=!1),this.dt.fixColumns()}findRowIndex(t,e){return this.dt.data.data.findIndex((s=>String(s[t].text).toLowerCase().includes(String(e).toLowerCase())))}findRow(t,e){const s=this.findRowIndex(t,e);if(s<0)return{index:-1,row:null,cols:[]};const i=this.dt.data.data[s],n=i.map((t=>t.text));return{index:s,row:i,cols:n}}updateRow(t,e){const s=e.map(((t,s)=>({text:(this.dt.columnSettings.columns[s]||{}).render?e.render(t):t,data:t})));this.dt.data.data.splice(t,1,s),this.dt.fixColumns()}}class L{constructor(t){this.dt=t}swap(t){if(2===t.length){const e=this.dt.data.headings.map(((t,e)=>e)),s=t[0],i=t[1],n=e[i];return e[i]=e[s],e[s]=n,this.order(e)}}order(t){this.dt.headings=t.map((t=>this.dt.headings[t])),this.dt.data.data=this.dt.data.data.map((e=>t.map((t=>e[t])))),this.dt.update()}hide(t){t.length&&(t.forEach((t=>{(this.dt.columnSettings.columns[t]||{}).hidden=!0})),this.dt.update())}show(t){t.length&&(t.forEach((t=>{delete(this.dt.columnSettings.columns[t]||{}).hidden})),this.dt.update())}visible(t){return Array.isArray(t)?t.map((t=>!this.dt.columnSettings.columns[t]?.hidden)):!this.dt.columnSettings.columns[t]?.hidden}add(t){const e=this.td.data.heading.length;if(this.td.data.heading=this.td.data.heading.concat([{data:t.heading}]),this.td.data.data=this.td.data.data.map(((e,s)=>e.concat([t.data[s].map((e=>({text:t.render?t.render(e):e,data:e})))]))),t.type||t.format||t.sortable||t.render){const s=this.td.columnSettings.columns[e]={};t.type&&(s.type=t.type),t.format&&(s.format=t.format),t.sortable&&(s.sortable=t.sortable),t.filter&&(s.filter=t.filter),t.type&&(s.type=t.type)}this.td.fixColumns()}remove(t){if(!Array.isArray(t))return this.remove([t]);this.dt.data.headings=this.dt.data.headings.filter(((e,s)=>!t.includes(s))),this.td.data.data=this.td.data.data.map((e=>e.filter(((e,s)=>!t.includes(s))))),this.td.fixColumns()}filter(t,e){if(!this.dt.columnSettings.columns[t]?.filter?.length)return;const s=this.dt.filterStates.find((e=>e.column===t));let i;if(s){let e=!1;i=this.dt.columnSettings.columns[t].filter.find((t=>!!e||(t===s.state&&(e=!0),!1)))}else i=this.dt.columnSettings.columns[t].filter[0];s&&i?s.state=i:s?this.dt.filterStates=this.dt.filterStates.filter((e=>e.column!==t)):this.dt.filterStates.push({column:t,state:i}),this.dt.update(),e||this.dt.emit("datatable.filter",t,i)}sort(t,e,s){if(this.dt.columnSettings.columns[t]?.filter?.length)return this.filter(t,s);if(s||this.dt.emit("datatable.sorting",t,e),!e){const s=this.dt.data.headings[t].sorted;e="asc"===s?"desc":"asc"}this.dt.data.headings.forEach((t=>{t.sorted=!1})),this.dt.data.data.sort(((s,i)=>{let n=s[t].order||s[t].data,o=i[t].order||i[t].data;if("desc"===e){const t=n;n=o,o=t}return n<o?-1:n>o?1:0})),this.dt.data.headings[t].sorted=e,this.dt.update(),s||this.dt.emit("datatable.sort",t,e)}}const P={sortable:!0,searchable:!0,destroyable:!0,paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",ascText:"▴",descText:"▾",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,header:!0,hiddenHeader:!1,footer:!1,tabIndex:!1,rowNavigation:!1,labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",noResults:"No results match your search query",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}},S=t=>"[object Object]"===Object.prototype.toString.call(t),R=t=>{let e=!1;try{e=JSON.parse(t)}catch(t){return!1}return!(null===e||!Array.isArray(e)&&!S(e))&&e},H=(t,e)=>{const s=document.createElement(t);if(e&&"object"==typeof e)for(const t in e)"html"===t?s.innerHTML=e[t]:s.setAttribute(t,e[t]);return s},I=t=>{t instanceof NodeList?t.forEach((t=>I(t))):t.innerHTML=""},$=(t,e,s)=>H("li",{class:t,html:`<a href="#" data-page="${e}">${s}</a>`});const B={classes:{row:"dataTable-editor-row",form:"dataTable-editor-form",item:"dataTable-editor-item",menu:"dataTable-editor-menu",save:"dataTable-editor-save",block:"dataTable-editor-block",close:"dataTable-editor-close",inner:"dataTable-editor-inner",input:"dataTable-editor-input",label:"dataTable-editor-label",modal:"dataTable-editor-modal",action:"dataTable-editor-action",header:"dataTable-editor-header",wrapper:"dataTable-editor-wrapper",editable:"dataTable-editor-editable",container:"dataTable-editor-container",separator:"dataTable-editor-separator"},labels:{editCell:"Edit Cell",editRow:"Edit Row",removeRow:"Remove Row",reallyRemove:"Are you sure?"},hiddenColumns:!1,contextMenu:!0,clickEvent:"dblclick",excludeColumns:[],menuItems:[{text:t=>t.options.labels.editCell,action:(t,e)=>{const s=t.event.target.closest("td");return t.editCell(s)}},{text:t=>t.options.labels.editRow,action:(t,e)=>{const s=t.event.target.closest("tr");return t.editRow(s)}},{separator:!0},{text:t=>t.options.labels.removeRow,action:(t,e)=>{if(confirm(t.options.labels.reallyRemove)){const e=t.event.target.closest("tr");t.removeRow(e)}}}]};class j{constructor(t,e={}){this.dataTable=t,this.options={...B,...e}}init(){this.initialized||(this.dataTable.wrapper.classList.add(this.options.classes.editable),this.options.contextMenu&&(this.container=H("div",{id:this.options.classes.container}),this.wrapper=H("div",{class:this.options.classes.wrapper}),this.menu=H("ul",{class:this.options.classes.menu}),this.options.menuItems&&this.options.menuItems.length&&this.options.menuItems.forEach((t=>{const e=H("li",{class:t.separator?this.options.classes.separator:this.options.classes.item});if(!t.separator){const s=H("a",{class:this.options.classes.action,href:t.url||"#",html:"function"==typeof t.text?t.text(this):t.text});e.appendChild(s),t.action&&"function"==typeof t.action&&s.addEventListener("click",(e=>{e.preventDefault(),t.action(this,e)}))}this.menu.appendChild(e)})),this.wrapper.appendChild(this.menu),this.container.appendChild(this.wrapper),this.update()),this.data={},this.closed=!0,this.editing=!1,this.editingRow=!1,this.editingCell=!1,this.bindEvents(),setTimeout((()=>{this.initialized=!0,this.dataTable.emit("editable.init")}),10))}bindEvents(){this.events={context:this.context.bind(this),update:this.update.bind(this),dismiss:this.dismiss.bind(this),keydown:this.keydown.bind(this),click:this.click.bind(this)},this.dataTable.body.addEventListener(this.options.clickEvent,this.events.click),document.addEventListener("click",this.events.dismiss),document.addEventListener("keydown",this.events.keydown),this.options.contextMenu&&(this.dataTable.body.addEventListener("contextmenu",this.events.context),this.events.reset=function(t,e=300){let s;return(...i)=>{clearTimeout(s),s=setTimeout((()=>{t.apply(this,i)}),e)}}(this.events.update,50),window.addEventListener("resize",this.events.reset),window.addEventListener("scroll",this.events.reset))}context(t){this.event=t;const e=this.dataTable.body.contains(t.target);if(this.options.contextMenu&&!this.disabled&&e){t.preventDefault();let e=t.pageX,s=t.pageY;e>this.limits.x&&(e-=this.rect.width),s>this.limits.y&&(s-=this.rect.height),this.wrapper.style.top=`${s}px`,this.wrapper.style.left=`${e}px`,this.openMenu(),this.update()}}click(t){if(this.editing&&this.data&&this.editingCell)this.saveCell();else if(!this.editing){const e=t.target.closest("td");e&&(this.editCell(e),t.preventDefault())}}keydown(t){this.modal?"Escape"===t.key?this.closeModal():"Enter"===t.key&&this.saveRow():this.editing&&this.data&&("Enter"===t.key?this.editingCell?this.saveCell():this.editingRow&&this.saveRow():"Escape"===t.key&&this.saveCell(this.data.content))}editCell(t){if(this.options.excludeColumns.includes(t.cellIndex))return void this.closeMenu();t=this.dataTable.body.rows[t.parentNode.dataIndex].cells[t.cellIndex],this.data={cell:t,content:t.dataset.content||t.innerHTML,input:H("input",{type:"text",value:t.dataset.content||t.innerHTML,class:this.options.classes.input})},t.innerHTML="",t.appendChild(this.data.input),setTimeout((()=>{this.data.input.focus(),this.data.input.selectionStart=this.data.input.selectionEnd=this.data.input.value.length,this.editing=!0,this.editingCell=!0,this.closeMenu()}),10)}saveCell(t,e){e=e||this.data.cell,t=t||this.data.input.value;const s=this.data.content;this.dataTable.data[e.parentNode.dataIndex].cells[e.cellIndex].innerHTML=e.innerHTML=t.trim(),this.data={},this.editing=this.editingCell=!1,this.dataTable.emit("editable.save.cell",t,s,e)}editRow(t){if(!(t=t||this.event.target.closest("tr"))||"TR"!==t.nodeName||this.editing)return;t=this.dataTable.body.rows[t.dataIndex];const e=[`<div class='${this.options.classes.inner}'>`,`<div class='${this.options.classes.header}'>`,"<h4>Editing row</h4>",`<button class='${this.options.classes.close}' type='button' data-editor-close>×</button>`," </div>",`<div class='${this.options.classes.block}'>`,`<form class='${this.options.classes.form}'>`,`<div class='${this.options.classes.row}'>`,`<button class='${this.options.classes.save}' type='button' data-editor-save>Save</button>`,"</div>","</form>","</div>","</div>"].join(""),s=H("div",{class:this.options.classes.modal,html:e}),i=s.firstElementChild.lastElementChild.firstElementChild;Array.from(t.cells).forEach(((t,e)=>{(!t.hidden||t.hidden&&this.options.hiddenColumns)&&!this.options.excludeColumns.includes(e)&&i.insertBefore(H("div",{class:this.options.classes.row,html:[`<div class='${this.options.classes.row}'>`,`<label class='${this.options.classes.label}'>${this.dataTable.header.cells[e].textContent}</label>`,`<input class='${this.options.classes.input}' value='${t.dataset.content||t.innerHTML}' type='text'>`,"</div>"].join("")}),i.lastElementChild)})),this.modal=s,this.openModal();const n=Array.from(i.elements);n.pop(),this.data={row:t,inputs:n},this.editing=!0,this.editingRow=!0,s.addEventListener("click",(t=>{t.target.hasAttribute("data-editor-close")?this.closeModal():t.target.hasAttribute("data-editor-save")&&this.saveRow()})),this.closeMenu()}saveRow(t,e){t=t||this.data.inputs.map((t=>t.value.trim())),e=e||this.data.row;const s=Array.from(e.cells).map((t=>t.dataset.content||t.innerHTML));Array.from(e.cells).forEach(((e,s)=>{e.innerHTML=t[s]})),this.closeModal(),this.dataTable.emit("editable.save.row",t,s,e)}openModal(){!this.editing&&this.modal&&document.body.appendChild(this.modal)}closeModal(){this.editing&&this.modal&&(document.body.removeChild(this.modal),this.modal=this.editing=this.editingRow=!1)}removeRow(t){t?(t instanceof Element&&"TR"===t.nodeName&&void 0!==t.dataIndex&&(t=t.dataIndex),this.dataTable.rows.remove(t),this.closeMenu()):(t=this.event.target.closest("tr"))&&void 0!==t.dataIndex&&(this.dataTable.rows.remove(t.dataIndex),this.closeMenu())}update(){const t=window.scrollX||window.pageXOffset,e=window.scrollY||window.pageYOffset;this.rect=this.wrapper.getBoundingClientRect(),this.limits={x:window.innerWidth+t-this.rect.width,y:window.innerHeight+e-this.rect.height}}dismiss(t){let e=!0;this.options.contextMenu&&(e=!this.wrapper.contains(t.target),this.editing&&(e=!this.wrapper.contains(t.target)&&t.target!==this.data.input)),e&&(this.editingCell&&this.saveCell(this.data.content),this.closeMenu())}openMenu(){this.editing&&this.data&&this.editingCell&&this.saveCell(),this.options.contextMenu&&(document.body.appendChild(this.container),this.closed=!1,this.dataTable.emit("editable.context.open"))}closeMenu(){this.options.contextMenu&&!this.closed&&(this.closed=!0,document.body.removeChild(this.container),this.dataTable.emit("editable.context.close"))}destroy(){this.dataTable.body.removeEventListener(this.options.clickEvent,this.events.click),this.dataTable.body.removeEventListener("contextmenu",this.events.context),document.removeEventListener("click",this.events.dismiss),document.removeEventListener("keydown",this.events.keydown),window.removeEventListener("resize",this.events.reset),window.removeEventListener("scroll",this.events.reset),document.body.contains(this.container)&&document.body.removeChild(this.container),this.initialized=!1}}exports.DataTable=class{constructor(t,e={}){this.dom="string"==typeof t?document.querySelector(t):t,this.options={...P,...e,layout:{...P.layout,...e.layout},labels:{...P.labels,...e.labels}},this.initialInnerHTML=this.options.destroyable?this.dom.innerHTML:"",this.options.tabIndex?this.dom.tabIndex=this.options.tabIndex:this.options.rowNavigation&&-1===this.dom.tabIndex&&(this.dom.tabIndex=0),this.listeners={onResize:t=>this.onResize(t)},this.dd=new D,this.initialized=!1,this.data=!1,this.virtualDOM=!1,this.virtualHeaderDOM=!1,this.headerDOM=!1,this.currentPage=0,this.onFirstPage=!0,this.hasHeadings=!1,this.hasRows=!1,this.columnWidths=[],this.columnSettings=!1,this.filterStates=[],this.init()}init(){if(this.initialized||this.dom.classList.contains("dataTable-table"))return!1;this.rows=new M(this),this.columns=new L(this),this.data=O(this.options.data,this.dom),this.hasRows=Boolean(this.data.data.length),this.hasHeadings=Boolean(this.data.headings.length),this.columnSettings=((t=[])=>{const e=[];let s=!1;return t.forEach((t=>{(Array.isArray(t.select)?t.select:[t.select]).forEach((i=>{e[i]||(e[i]={});const n=e[i];t.render&&(n.render=t.render),t.type&&(n.type=t.type),t.format&&(n.format=t.format),!1===t.sortable&&(n.notSortable=!0),t.hidden&&(n.hidden=!0),t.filter&&(n.filter=t.filter),t.sort&&(s={column:n,direction:t.sort})}))})),{columns:e,sort:s}})(this.options.columns),this.virtualDOM=v(this.dom),this.render(),setTimeout((()=>{this.emit("datatable.init"),this.initialized=!0}),10)}render(){this.bodyDOM=this.dom.tBodies[0],this.head=this.dom.tHead,this.hasHeadings&&(this.header=this.head.rows[0]),this.wrapper=H("div",{class:"dataTable-wrapper dataTable-loading"});let t="";if(t+="<div class='dataTable-top'>",t+=this.options.layout.top,t+="</div>",this.options.scrollY.length?t+=`<div class='dataTable-container' style='height: ${this.options.scrollY}; overflow-Y: auto;'></div>`:t+="<div class='dataTable-container'></div>",t+="<div class='dataTable-bottom'>",t+=this.options.layout.bottom,t+="</div>",t=t.replace("{info}",this.options.paging?"<div class='dataTable-info'></div>":""),this.options.paging&&this.options.perPageSelect){let e="<div class='dataTable-dropdown'><label>";e+=this.options.labels.perPage,e+="</label></div>";const s=H("select",{class:"dataTable-selector"});this.options.perPageSelect.forEach((t=>{const e=t===this.options.perPage,i=new Option(t,t,e,e);s.add(i)})),e=e.replace("{select}",s.outerHTML),t=t.replace("{select}",e)}else t=t.replace("{select}","");if(this.options.searchable){const e=`<div class='dataTable-search'><input class='dataTable-input' placeholder='${this.options.labels.placeholder}' type='text'></div>`;t=t.replace("{search}",e)}else t=t.replace("{search}","");const e=H("nav",{class:"dataTable-pagination"}),s=H("ul",{class:"dataTable-pagination-list"});e.appendChild(s),t=t.replace(/\{pager\}/g,e.outerHTML),this.wrapper.innerHTML=t,this.container=this.wrapper.querySelector(".dataTable-container"),this.pagers=this.wrapper.querySelectorAll(".dataTable-pagination-list"),this.label=this.wrapper.querySelector(".dataTable-info"),this.dom.parentNode.replaceChild(this.wrapper,this.dom),this.container.appendChild(this.dom),this.rect=this.dom.getBoundingClientRect(),this.update(!1),this.fixHeight(),this.fixColumns(),this.options.header||this.wrapper.classList.add("no-header"),this.options.footer||this.wrapper.classList.add("no-footer"),this.options.sortable&&this.wrapper.classList.add("sortable"),this.options.searchable&&this.wrapper.classList.add("searchable"),this.options.fixedHeight&&this.wrapper.classList.add("fixed-height"),this.options.fixedColumns&&this.wrapper.classList.add("fixed-columns"),this.bindEvents()}renderTable(t={}){const e=((t,e,s,i,n,{hiddenHeader:o,header:a,footer:l,sortable:r,scrollY:d},{noColumnWidths:c,unhideHeader:h,showHeader:u})=>{const p={nodeName:"TABLE",attributes:{class:"dataTable-table"},childNodes:[{nodeName:"TBODY",childNodes:e.map((({row:t,index:e})=>{const o={nodeName:"TR",attributes:{"data-index":e},childNodes:t.map(((t,e)=>{const n=s.columns[e]||{};if(n.hidden)return!1;const o={nodeName:"TD",childNodes:[{nodeName:"#text",data:n.render?n.render(t.data):t.text}]};return a||l||!i[e]||c||(o.attributes={style:`width: ${i[e]}%;`}),o})).filter((t=>t))};return e===n&&(o.attributes.class="dataTable-cursor"),o}))}]};if(a||l||u){const e=A(t,s,i,{hiddenHeader:o,sortable:r,scrollY:d},{noColumnWidths:c,unhideHeader:h});if((a||u)&&p.childNodes.unshift({nodeName:"THEAD",childNodes:[e]}),l){const t=a?structuredClone(e):e;p.childNodes.push({nodeName:"TFOOT",childNodes:[t]})}}return p})(this.data.headings,this.options.paging&&this.currentPage&&!t.noPaging?this.pages[this.currentPage-1]:this.data.data.map(((t,e)=>({row:t,index:e}))),this.columnSettings,this.columnWidths,this.rows.cursor,this.options,t),s=this.dd.diff(this.virtualDOM,e);console.log({diff:s,newVirtualDOM:e,virtualDOM:this.virtualDOM}),this.dd.apply(this.dom,s),this.virtualDOM=e}renderPage(t=!0,e=!1){this.hasRows&&this.totalPages?(this.currentPage>this.totalPages&&(this.currentPage=1),t&&this.renderTable(),this.onFirstPage=1===this.currentPage,this.onLastPage=this.currentPage===this.lastPage):this.setMessage(this.options.labels.noRows);let s,i=0,n=0,o=0;if(this.totalPages&&(i=this.currentPage-1,n=i*this.options.perPage,o=n+this.pages[i].length,n+=1,s=this.searching?this.searchData.length:this.data.data.length),this.label&&this.options.labels.info.length){const t=this.options.labels.info.replace("{start}",n).replace("{end}",o).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",s);this.label.innerHTML=s?t:""}if(1==this.currentPage&&this.fixHeight(),this.options.rowNavigation&&(!this.rows.cursor||!this.pages[this.currentPage-1].find((t=>t.index===this.rows.cursor)))){const t=this.pages[this.currentPage-1];e?this.rows.setCursor(t[t.length-1]):this.rows.setCursor(t[0])}}renderPager(){if(I(this.pagers),this.totalPages>1){const t="pager",e=document.createDocumentFragment(),s=this.onFirstPage?1:this.currentPage-1,i=this.onLastPage?this.totalPages:this.currentPage+1;this.options.firstLast&&e.appendChild($(t,1,this.options.firstText)),this.options.nextPrev&&!this.onFirstPage&&e.appendChild($(t,s,this.options.prevText));let n=this.links;this.options.truncatePager&&(n=((t,e,s,i,n)=>{let o;const a=2*(i=i||2);let l=e-i,r=e+i;const d=[],c=[];e<4-i+a?r=3+a:e>s-(3-i+a)&&(l=s-(2+a));for(let e=1;e<=s;e++)if(1==e||e==s||e>=l&&e<=r){const s=t[e-1];s.classList.remove("active"),d.push(s)}return d.forEach((e=>{const s=e.children[0].getAttribute("data-page");if(o){const e=o.children[0].getAttribute("data-page");if(s-e==2)c.push(t[e]);else if(s-e!=1){const t=H("li",{class:"ellipsis",html:`<a href="#">${n}</a>`});c.push(t)}}c.push(e),o=e})),c})(this.links,this.currentPage,this.pages.length,this.options.pagerDelta,this.options.ellipsisText)),this.links[this.currentPage-1].classList.add("active"),n.forEach((t=>{t.classList.remove("active"),e.appendChild(t)})),this.links[this.currentPage-1].classList.add("active"),this.options.nextPrev&&!this.onLastPage&&e.appendChild($(t,i,this.options.nextText)),this.options.firstLast&&e.appendChild($(t,this.totalPages,this.options.lastText)),this.pagers.forEach((t=>{t.appendChild(e.cloneNode(!0))}))}}bindEvents(){if(this.options.perPageSelect){const t=this.wrapper.querySelector(".dataTable-selector");t&&t.addEventListener("change",(()=>{this.options.perPage=parseInt(t.value,10),this.update(),this.fixHeight(),this.emit("datatable.perpage",this.options.perPage)}),!1)}this.options.searchable&&(this.input=this.wrapper.querySelector(".dataTable-input"),this.input&&this.input.addEventListener("keyup",(()=>this.search(this.input.value)),!1)),this.wrapper.addEventListener("click",(t=>{const e=t.target.closest("a");e&&"a"===e.nodeName.toLowerCase()&&(e.hasAttribute("data-page")?(this.page(e.getAttribute("data-page")),t.preventDefault()):this.options.sortable&&e.classList.contains("dataTable-sorter")&&"false"!=e.parentNode.getAttribute("data-sortable")&&(this.columns.sort(Array.from(e.parentNode.parentNode.children).indexOf(e.parentNode)),t.preventDefault()))}),!1),this.options.rowNavigation?(this.dom.addEventListener("keydown",(t=>{"ArrowUp"===t.key?this.rows.cursor.previousElementSibling?(this.rows.setCursor(this.rows.cursor.previousElementSibling),t.preventDefault(),t.stopPropagation()):this.onFirstPage||this.page(this.currentPage-1,{lastRowCursor:!0}):"ArrowDown"===t.key?this.rows.cursor.nextElementSibling?(this.rows.setCursor(this.rows.cursor.nextElementSibling),t.preventDefault(),t.stopPropagation()):this.onLastPage||this.page(this.currentPage+1):["Enter"," "].includes(t.key)&&this.emit("datatable.selectrow",this.rows.cursor,t)})),this.bodyDOM.addEventListener("mousedown",(t=>{if(this.bodyDOM.matches(":focus")){const e=Array.from(this.bodyDOM.rows).find((e=>e.contains(t.target)));this.emit("datatable.selectrow",e,t)}}))):this.bodyDOM.addEventListener("mousedown",(t=>{const e=Array.from(this.bodyDOM.rows).find((e=>e.contains(t.target)));this.emit("datatable.selectrow",e,t)})),window.addEventListener("resize",this.listeners.onResize)}onResize(){this.rect=this.container.getBoundingClientRect(),this.rect.width&&this.fixColumns()}destroy(){this.options.destroyable&&(this.dom.innerHTML=this.initialInnerHTML,this.dom.classList.remove("dataTable-table"),this.wrapper.parentNode.replaceChild(this.dom,this.wrapper),this.initialized=!1,window.removeEventListener("resize",this.listeners.onResize))}update(t=!0){this.wrapper.classList.remove("dataTable-empty"),this.paginate(),this.renderPage(t),this.links=[];let e=this.pages.length;for(;e--;){const t=e+1;this.links[e]=$(0===e?"active":"",t,t)}this.sorting=!1,this.renderPager(),this.emit("datatable.update")}paginate(){let t=this.data.data.map(((t,e)=>({row:t,index:e})));return this.searching&&(t=[],this.searchData.forEach((e=>t.push({index:e,row:this.data.data[e]})))),this.filterStates.length&&this.filterStates.forEach((e=>{t=t.filter((t=>"function"==typeof e.state?e.state(t.row[e.column]):t.row[e.column]===e.state))})),this.options.paging?this.pages=t.map(((e,s)=>s%this.options.perPage==0?t.slice(s,s+this.options.perPage):null)).filter((t=>t)):this.pages=[t],this.totalPages=this.lastPage=this.pages.length,this.currentPage=1,this.totalPages}fixColumns(){const t=this.data.headings.filter(((t,e)=>!this.columnSettings.columns[e]?.hidden));if((this.options.scrollY.length||this.options.fixedColumns)&&t?.length){this.columnWidths=[];const t={noPaging:!0};if(this.options.header||this.options.footer){this.options.scrollY.length&&(t.unhideHeader=!0),this.headerDOM&&this.headerDOM.parentElement.removeChild(this.headerDOM),t.noColumnWidths=!0,this.renderTable(t);const e=Array.from(this.dom.querySelector("thead, tfoot")?.firstElementChild?.children||[]).map((t=>t.offsetWidth)),s=e.reduce(((t,e)=>t+e),0);if(this.columnWidths=e.map((t=>t/s*100)),this.options.scrollY.length){const t=this.dom.parentElement;this.headerDOM||(this.headerDOM=document.createElement("div"),this.virtualHeaderDOM={nodeType:"DIV"}),t.parentElement.insertBefore(this.headerDOM,t);const e={nodeType:"DIV",attributes:{class:"dataTable-headercontainer"},childNodes:[{nodeType:"TABLE",attributes:{class:"dataTable-table"},childNodes:[{nodeType:"THEAD",childNodes:[{nodeType:"TR",childNodes:[A()]}]}]}]},s=this.dd.diff(this.virtualHeaderDOM,e);this.dd.apply(this.headerDOM,s),this.virtualHeaderDOM=e;const i=this.headerDOM.firstElementChild.clientWidth-this.dom.clientWidth;if(i){const t=structuredClone(this.virtualHeaderDOM);t.attributes.style=`padding-right: ${i}px;`;const e=this.dd.diff(this.virtualHeaderDOM,t);this.dd.apply(this.headerDOM,e),this.virtualHeaderDOM=t}t.scrollHeight>t.clientHeight&&(t.style.overflowY="scroll")}}else{t.showHeader=!0,this.renderTable(t);const e=Array.from(this.dom.querySelector("thead, tfoot")?.firstElementChild?.children||[]).map((t=>t.offsetWidth)),s=e.reduce(((t,e)=>t+e),0);this.columnWidths=e.map((t=>t/s*100))}this.renderTable()}}fixHeight(){this.options.fixedHeight&&(this.container.style.height=null,this.rect=this.container.getBoundingClientRect(),this.container.style.height=`${this.rect.height}px`)}search(t){return!!this.hasRows&&(t=t.toLowerCase(),this.currentPage=1,this.searching=!0,this.searchData=[],t.length?(this.data.data.forEach(((e,s)=>{const i=this.searchData.includes(e);t.split(" ").reduce(((t,s)=>{let i=!1,n=null,o=null;for(let t=0;t<e.length;t++)if(n=e[t],o=n.data,o.toLowerCase().includes(s)&&this.columns.visible(n.cellIndex)){i=!0;break}return t&&i}),!0)&&!i&&this.searchData.push(s)})),this.wrapper.classList.add("search-results"),this.searchData.length?this.update():(this.wrapper.classList.remove("search-results"),this.setMessage(this.options.labels.noResults)),void this.emit("datatable.search",t,this.searchData)):(this.searching=!1,this.update(),this.emit("datatable.search",t,this.searchData),this.wrapper.classList.remove("search-results"),!1))}page(t,e=!1){return t!=this.currentPage&&(isNaN(t)||(this.currentPage=parseInt(t,10)),!(t>this.pages.length||t<0)&&(this.renderPage(void 0,e),this.renderPager(),void this.emit("datatable.page",t)))}insert(t){let e=[];S(t)?(t.headings&&(this.hasHeadings||this.hasRows||(this.data=O(t),this.hasRows=Boolean(this.data.data.length),this.hasHeadings=Boolean(this.data.headings.length))),t.data&&Array.isArray(t.data)&&(e=t.data)):Array.isArray(t)&&t.forEach((t=>{const s=[];Object.entries(t).forEach((([t,e])=>{const i=this.data.headings.indexOf(t);i>-1&&(s[i]=e)})),e.push(s)})),e.length&&(e.forEach((t=>this.data.data.push(t.map((t=>({data:t,text:t})))))),this.hasRows=!0),this.update(!1),this.fixColumns()}refresh(){this.options.searchable&&(this.input.value="",this.searching=!1),this.currentPage=1,this.onFirstPage=!0,this.update(),this.emit("datatable.refresh")}print(){const t=this.virtualDOM.childNodes.find((t=>["THEAD","TFOOT"].includes(t.nodeType)))?.childNodes,e=this.data.data,s=H("table"),i=H("thead"),n=H("tbody"),o=H("tr");t.forEach((t=>{o.appendChild(H("th",{html:t.textContent}))})),i.appendChild(o),e.forEach((t=>{const e=H("tr");Array.from(t.cells).forEach((t=>{e.appendChild(H("td",{html:t.textContent}))})),n.appendChild(e)})),s.appendChild(i),s.appendChild(n);const a=window.open();a.document.body.appendChild(s),a.print()}setMessage(t){const e=this.data.headings.filter(((t,e)=>!this.columnSettings.columns[e]?.hidden)).length||1;this.wrapper.classList.add("dataTable-empty"),this.label&&(this.label.innerHTML=""),this.totalPages=0,this.renderPager();const s=structuredClone(this.virtualDOM);s.childNodes.find((t=>"TBODY"===t.nodeName)).childNodes=[{nodeName:"TR",childNodes:[{nodeName:"TD",attributes:{class:"dataTables-empty",colspan:e},childNodes:[{nodeName:"#text",data:t}]}]}];const i=this.dd.diff(this.virtualDOM,s);this.dd.apply(this.dom,i),this.virtualDOM=s}on(t,e){this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e)}off(t,e){this.events=this.events||{},t in this.events!=!1&&this.events[t].splice(this.events[t].indexOf(e),1)}emit(t){if(this.events=this.events||{},t in this.events!=!1)for(let e=0;e<this.events[t].length;e++)this.events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},exports.convertCSV=function(t={}){let e=!1;if(!S(t))return!1;const s={lineDelimiter:"\n",columnDelimiter:",",removeDoubleQuotes:!1,...t};if(s.data.length||S(s.data)){e={data:[]};const t=s.data.split(s.lineDelimiter);if(t.length&&(s.headings&&(e.headings=t[0].split(s.columnDelimiter),s.removeDoubleQuotes&&(e.headings=e.headings.map((t=>t.trim().replace(/(^"|"$)/g,"")))),t.shift()),t.forEach(((t,i)=>{e.data[i]=[];const n=t.split(s.columnDelimiter);n.length&&n.forEach((t=>{s.removeDoubleQuotes&&(t=t.trim().replace(/(^"|"$)/g,"")),e.data[i].push(t)}))}))),e)return e}return!1},exports.convertJSON=function(t={}){let e=!1;if(!S(t))return!1;const s={...t};if(s.data.length||S(s.data)){const t=R(s.data);if(t?(e={headings:[],data:[]},t.forEach(((t,s)=>{e.data[s]=[],Object.entries(t).forEach((([t,i])=>{e.headings.includes(t)||e.headings.push(t),e.data[s].push(i)}))}))):console.warn("That's not valid JSON!"),e)return e}return!1},exports.createElement=H,exports.exportCSV=function(t,e={}){if(!t.hasHeadings&&!t.hasRows)return!1;const s=t.activeHeadings;let i,n,o,a,l=[];if(!S(e))return!1;const r={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",...e};if(l[0]=t.header,r.selection)if(isNaN(r.selection)){if(Array.isArray(r.selection))for(i=0;i<r.selection.length;i++)l=l.concat(t.pages[r.selection[i]-1])}else l=l.concat(t.pages[r.selection-1]);else l=l.concat(t.activeRows);if(l.length){for(o="",i=0;i<l.length;i++){for(n=0;n<l[i].cells.length;n++)if(!r.skipColumn.includes(s[n].originalCellIndex)&&t.columns.visible(s[n].originalCellIndex)){let t=l[i].cells[n].textContent;t=t.trim(),t=t.replace(/\s{2,}/g," "),t=t.replace(/\n/g,"  "),t=t.replace(/"/g,'""'),t=t.replace(/#/g,"%23"),t.includes(",")&&(t=`"${t}"`),o+=t+r.columnDelimiter}o=o.trim().substring(0,o.length-1),o+=r.lineDelimiter}return o=o.trim().substring(0,o.length-1),r.download&&(a=document.createElement("a"),a.href=encodeURI(`data:text/csv;charset=utf-8,${o}`),a.download=`${r.filename||"datatable_export"}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a)),o}return!1},exports.exportJSON=function(t,e={}){if(!t.hasHeadings&&!t.hasRows)return!1;const s=t.activeHeadings;let i=[];const n=[];let o,a,l,r;if(!S(e))return!1;const d={download:!0,skipColumn:[],replacer:null,space:4,...e};if(d.selection)if(isNaN(d.selection)){if(Array.isArray(d.selection))for(o=0;o<d.selection.length;o++)i=i.concat(t.pages[d.selection[o]-1])}else i=i.concat(t.pages[d.selection-1]);else i=i.concat(t.activeRows);if(i.length){for(a=0;a<i.length;a++)for(n[a]=n[a]||{},o=0;o<s.length;o++)!d.skipColumn.includes(s[o].originalCellIndex)&&t.columns.visible(s[o].originalCellIndex)&&(n[a][s[o].textContent]=i[a].cells[o].textContent);return l=JSON.stringify(n,d.replacer,d.space),d.download&&(r=document.createElement("a"),r.href=encodeURI(`data:application/json;charset=utf-8,${l}`),r.download=`${d.filename||"datatable_export"}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r)),l}return!1},exports.exportSQL=function(t,e={}){if(!t.hasHeadings&&!t.hasRows)return!1;const s=t.activeHeadings;let i,n,o,a,l=[];if(!S(e))return!1;const r={download:!0,skipColumn:[],tableName:"myTable",...e};if(r.selection)if(isNaN(r.selection)){if(Array.isArray(r.selection))for(i=0;i<r.selection.length;i++)l=l.concat(t.pages[r.selection[i]-1])}else l=l.concat(t.pages[r.selection-1]);else l=l.concat(t.activeRows);if(l.length){for(o=`INSERT INTO \`${r.tableName}\` (`,i=0;i<s.length;i++)!r.skipColumn.includes(s[i].originalCellIndex)&&t.columns.visible(s[i].originalCellIndex)&&(o+=`\`${s[i].textContent}\`,`);for(o=o.trim().substring(0,o.length-1),o+=") VALUES ",i=0;i<l.length;i++){for(o+="(",n=0;n<l[i].cells.length;n++)!r.skipColumn.includes(s[n].originalCellIndex)&&t.columns.visible(s[n].originalCellIndex)&&(o+=`"${l[i].cells[n].textContent}",`);o=o.trim().substring(0,o.length-1),o+="),"}return o=o.trim().substring(0,o.length-1),o+=";",r.download&&(o=`data:application/sql;charset=utf-8,${o}`),r.download&&(a=document.createElement("a"),a.href=encodeURI(o),a.download=`${r.filename||"datatable_export"}.sql`,document.body.appendChild(a),a.click(),document.body.removeChild(a)),o}return!1},exports.exportTXT=function(t,e={}){if(!t.hasHeadings&&!t.hasRows)return!1;const s=t.activeHeadings;let i,n,o,a,l=[];if(!S(e))return!1;const r={download:!0,skipColumn:[],...e};if(l[0]=t.header,r.selection)if(isNaN(r.selection)){if(Array.isArray(r.selection))for(i=0;i<r.selection.length;i++)l=l.concat(t.pages[r.selection[i]-1])}else l=l.concat(t.pages[r.selection-1]);else l=l.concat(t.activeRows);if(l.length){for(o="",i=0;i<l.length;i++){for(n=0;n<l[i].cells.length;n++)if(!r.skipColumn.includes(s[n].originalCellIndex)&&t.columns.visible(s[n].originalCellIndex)){let t=l[i].cells[n].textContent;t=t.trim(),t=t.replace(/\s{2,}/g," "),t=t.replace(/\n/g,"  "),t=t.replace(/"/g,'""'),t=t.replace(/#/g,"%23"),t.includes(",")&&(t=`"${t}"`),o+=t+r.columnDelimiter}o=o.trim().substring(0,o.length-1),o+=r.lineDelimiter}return o=o.trim().substring(0,o.length-1),r.download&&(o=`data:text/csv;charset=utf-8,${o}`),r.download&&(a=document.createElement("a"),a.href=encodeURI(o),a.download=`${r.filename||"datatable_export"}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a)),o}return!1},exports.isJson=R,exports.isObject=S,exports.makeEditable=function(t,e={}){const s=new j(t,e);return t.initialized?s.init():t.on("datatable.init",(()=>s.init())),s};


},{}]},{},[1])(1)
});
